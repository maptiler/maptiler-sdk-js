import*as s from"maplibre-gl";import{ScaleControl as W,GeolocateControl as F,FullscreenControl as Z}from"maplibre-gl";export*from"maplibre-gl";import{v4 as q}from"uuid";import J from"events";import{config as P}from"@maptiler/client";import{LanguageGeocoding as Le,ServiceError as _e,coordinates as Se,data as Te,geocoding as Ae,geolocation as be,staticMaps as Ie}from"@maptiler/client";import N from"@mapbox/point-geometry";import Y from"@mapbox/unitbezier";const S={AUTO:"auto",LATIN:"latin",NON_LATIN:"nonlatin",LOCAL:"",ALBANIAN:"sq",AMHARIC:"am",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BASQUE:"eu",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CORSICAN:"co",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HINDI:"hi",HUNGARIAN:"hu",ICELANDIC:"is",INDONESIAN:"id",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",JAPANESE_HIRAGANA:"ja-Hira",JAPANESE_KANA:"ja_kana",JAPANESE_LATIN:"ja_rm",JAPANESE_2018:"ja-Latn",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",KOREAN_LATIN:"ko-Latn",KURDISH:"ku",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALAYALAM:"ml",MALTESE:"mt",NORWEGIAN:"no",OCCITAN:"oc",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SERBIAN_LATIN:"sr-Latn",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",TAMIL:"ta",TELUGU:"te",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"},X=new Set(Object.values(S));function E(){if(typeof navigator>"u")return Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];const e=Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).filter(t=>X.has(t));return e.length?e[0]:S.LATIN}class D extends J{constructor(){super(),this.primaryLanguage=S.AUTO,this.secondaryLanguage=null,this._unit="metric",this._apiKey="Not defined yet."}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,P.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){P.fetch=t}get fetch(){return P.fetch}}const f=new D,y={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiURL:"https://api.maptiler.com/",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:S.LATIN,secondaryLanguage:S.NON_LATIN,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(y);class B extends s.LogoControl{constructor(t={}){var i,r;super(t),this.logoURL="",this.linkURL="",this.logoURL=(i=t.logoURL)!=null?i:y.maptilerLogoURL,this.linkURL=(r=t.linkURL)!=null?r:y.maptilerURL}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const i=window.document.createElement("a");return i.style.backgroundRepeat="no-repeat",i.style.cursor="pointer",i.style.display="block",i.style.height="23px",i.style.margin="0 0 -4px -4px",i.style.overflow="hidden",i.style.width="88px",i.style.backgroundImage=`url(${this.logoURL})`,i.style.backgroundSize="100px 30px",i.style.width="100px",i.style.height="30px",i.target="_blank",i.rel="noopener nofollow",i.href=this.linkURL,i.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),i.setAttribute("rel","noopener nofollow"),this._container.appendChild(i),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}function Q(){const e=s;e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(y.rtlPluginURL,null,!0)}var tt=8,et="f0e4ff8c-a9e4-414e-9f4d-7938762c948f",it="Satellite no label",rt={satellite:{url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json",tileSize:512,type:"raster"},maptiler_attribution:{attribution:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',type:"vector"}},at=[{id:"satellite",type:"raster",source:"satellite",minzoom:0,layout:{visibility:"visible"},paint:{"raster-opacity":1},filter:["all"]}],nt={"maptiler:copyright":"This style was generated on MapTiler Cloud. Usage outside of MapTiler Cloud or MapTiler Server requires valid MapTiler Data package: https://www.maptiler.com/data/ -- please contact us."},st="https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?",ot=0,lt=0,ct=[-78.55323097748868,24.03141891413972],ut=5.066147709178387,ht={version:tt,id:et,name:it,sources:rt,layers:at,metadata:nt,glyphs:st,bearing:ot,pitch:lt,center:ct,zoom:ut};const w=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Winter",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]}],b={satellite:ht};function k(e){const t=/^maptiler:\/\/(.*)/;let i;const r=e.trim();let a;return r.startsWith("http://")||r.startsWith("https://")?a=r:(i=t.exec(r))!==null?a=`https://api.maptiler.com/maps/${i[1]}/style.json`:a=`https://api.maptiler.com/maps/${r}/style.json`,a}function mt(e){return new Proxy(e,{get(t,i,r){return t.hasVariant(i)?t.getVariant(i):i.toString().toUpperCase()===i?e.getDefaultVariant():Reflect.get(t,i,r)}})}class R{constructor(t,i,r,a,n,p){this.name=t,this.variantType=i,this.id=r,this.referenceStyle=a,this.description=n,this.imageURL=p}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getUsableStyle(){return this.id in b?b[this.id]:k(this.id)}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}}class x{constructor(t,i){this.name=t,this.id=i,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}function pt(){const e={};for(let t=0;t<w.length;t+=1){const i=w[t],r=mt(new x(i.name,i.referenceStyleID));for(let a=0;a<i.variants.length;a+=1){const n=i.variants[a],p=new R(n.name,n.variantType,n.id,r,n.description,n.imageURL);r.addVariant(p)}e[i.referenceStyleID]=r}return e}const O=pt();function $(e){return e?typeof e=="string"&&e.toLowerCase()in b?b[e.toLowerCase()]:typeof e=="string"||e instanceof String?k(e):e instanceof R?e.getUsableStyle():e instanceof x?e.getDefaultVariant().getUsableStyle():e:O[w[0].referenceStyleID].getDefaultVariant().getUsableStyle()}const u=class{static testProp(e){if(!u.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in u.docStyle)return e[t];return e[0]}static create(e,t,i){const r=window.document.createElement(e);return t!==void 0&&(r.className=t),i&&i.appendChild(r),r}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){u.docStyle&&u.selectProp&&(u.userSelect=u.docStyle[u.selectProp],u.docStyle[u.selectProp]="none")}static enableDrag(){u.docStyle&&u.selectProp&&(u.docStyle[u.selectProp]=u.userSelect)}static setTransform(e,t){e.style[u.transformProp]=t}static addEventListener(e,t,i,r={}){"passive"in r?e.addEventListener(t,i,r):e.addEventListener(t,i,r.capture)}static removeEventListener(e,t,i,r={}){"passive"in r?e.removeEventListener(t,i,r):e.removeEventListener(t,i,r.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",u.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",u.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",u.suppressClickInternal,!0)},0)}static mousePos(e,t){const i=e.getBoundingClientRect();return new N(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)}static touchPos(e,t){const i=e.getBoundingClientRect(),r=[];for(let a=0;a<t.length;a++)r.push(new N(t[a].clientX-i.left-e.clientLeft,t[a].clientY-i.top-e.clientTop));return r}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}};let o=u;o.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,o.selectProp=u.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=u.testProp(["transform","WebkitTransform"]);function dt(e,t,i,r){const a=new Y(e,t,i,r);return function(n){return a.solve(n)}}dt(.25,.1,.25,1);function M(e,...t){for(const i of t)for(const r in i)e[r]=i[r];return e}function I(e,t){e.forEach(i=>{!t[i]||(t[i]=t[i].bind(t))})}class gt{constructor(){I(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=o.create("button","maplibregl-ctrl-terrain",this._container),o.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){o.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}}const C=0,U=2,ft={[C]:1,[U]:2};function yt(e,t){const i=ft[t];return e.buttons===void 0||(e.buttons&i)!==i}class z{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,i){return!1}_move(t,i){return{}}mousedown(t,i){if(this._lastPoint)return;const r=o.mouseButton(t);!this._correctButton(t,r)||(this._lastPoint=i,this._eventButton=r)}mousemoveWindow(t,i){const r=this._lastPoint;if(r){if(t.preventDefault(),yt(t,this._eventButton)){this.reset();return}if(!(!this._moved&&i.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=i,this._move(r,i)}}mouseupWindow(t){!this._lastPoint||o.mouseButton(t)!==this._eventButton||(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vt extends z{_correctButton(t,i){return i===C&&t.ctrlKey||i===U}_move(t,i){const r=(i.x-t.x)*.8;if(r)return this._active=!0,{bearingDelta:r}}contextmenu(t){t.preventDefault()}}class Lt extends z{_correctButton(t,i){return i===C&&t.ctrlKey||i===U}_move(t,i){const r=(i.y-t.y)*-.5;if(r)return this._active=!0,{pitchDelta:r}}contextmenu(t){t.preventDefault()}}const _t={showCompass:!0,showZoom:!0,visualizePitch:!1};class St{constructor(t){this.options=M({},_t,t),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(I(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(I(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this._map.getPitch()===0?this._map.easeTo({pitch:this._map.getMaxPitch()}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map.getZoom(),i=t===this._map.getMaxZoom(),r=t===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5))}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Tt(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,i){const r=o.create("button",t,this._container);return r.type="button",r.addEventListener("click",i),r}_setButtonTitle(t,i){const r=this._map._getUIString(`NavigationControl.${i}`);t.title=r,t.setAttribute("aria-label",r)}}class Tt{constructor(t,i,r=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new vt({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new Lt({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),I(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(i,"mousedown",this.mousedown),o.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(i,"touchmove",this.touchmove),o.addEventListener(i,"touchend",this.touchend),o.addEventListener(i,"touchcancel",this.reset)}down(t,i){this.mouseRotate.mousedown(t,i),this.mousePitch&&this.mousePitch.mousedown(t,i),o.disableDrag()}move(t,i){const r=this.map,a=this.mouseRotate.mousemoveWindow(t,i);if(a&&a.bearingDelta&&r.setBearing(r.getBearing()+a.bearingDelta),this.mousePitch){const n=this.mousePitch.mousemoveWindow(t,i);n&&n.pitchDelta&&r.setPitch(r.getPitch()+n.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup)}mousedown(t){this.down(M({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),o.mousePos(this.element,t)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){t.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){t.targetTouches.length!==1?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){t.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}var At=Object.defineProperty,bt=Object.defineProperties,It=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,V=(e,t,i)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,G=(e,t)=>{for(var i in t||(t={}))Pt.call(t,i)&&V(e,i,t[i]);if(H)for(var i of H(t))Et.call(t,i)&&V(e,i,t[i]);return e},K=(e,t)=>bt(e,It(t)),j=(e,t,i)=>new Promise((r,a)=>{var n=m=>{try{h(i.next(m))}catch(v){a(v)}},p=m=>{try{h(i.throw(m))}catch(v){a(v)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(n,p);h((i=i.apply(e,t)).next())});const wt=q();class Rt extends s.Map{constructor(t){var i;const r=$(t.style);super(K(G({},t),{style:r,maplibreLogo:!1,transformRequest:a=>{const n=new URL(a);return n.searchParams.has("key")||n.searchParams.append("key",f.apiKey),n.searchParams.append("mtsid",wt),{url:n.href,headers:{}}}})),this.languageShouldUpdate=!1,this.isStyleInitialized=!1,this.isTerrainEnabled=!1,this.terrainExaggeration=1,this.on("styledataloading",()=>{this.languageShouldUpdate=!!f.primaryLanguage||!!f.secondaryLanguage}),this.on("styledata",()=>{f.primaryLanguage&&(this.languageShouldUpdate||!this.isStyleInitialized)&&this.setPrimaryLanguage(f.primaryLanguage),f.secondaryLanguage&&(this.languageShouldUpdate||!this.isStyleInitialized)&&this.setSecondaryLanguage(f.secondaryLanguage),this.languageShouldUpdate=!1,this.isStyleInitialized=!0}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",()=>j(this,null,function*(){Q()})),this.once("load",()=>j(this,null,function*(){let a={logo:null};try{const n=Object.keys(this.style.sourceCaches).map(h=>this.getSource(h)).filter(h=>typeof h.url=="string"&&h.url.includes("tiles.json")),p=new URL(n[0].url);p.searchParams.has("key")||p.searchParams.append("key",f.apiKey),a=yield(yield fetch(p.href)).json()}catch{}if("logo"in a&&a.logo){const n=a.logo;this.addControl(new B({logoURL:n}),t.logoPosition),t.attributionControl===!1&&this.addControl(new s.AttributionControl(t))}else t.maptilerLogo&&this.addControl(new B,t.logoPosition);if(t.scaleControl){const n=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,p=new W({unit:f.unit});this.addControl(p,n),f.on("unit",h=>{p.setUnit(h)})}if(t.navigationControl!==!1){const n=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new St({showCompass:!0,showZoom:!0,visualizePitch:!0}),n),this.addControl(new F({}),n)}if(t.terrainControl!==!1){const n=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new gt,n)}if(t.fullscreenControl){const n=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new Z({}),n)}})),t.terrain&&this.enableTerrain((i=t.terrainExaggeration)!=null?i:this.terrainExaggeration)}setStyle(t,i){return super.setStyle($(t),i)}setLanguage(t=y.primaryLanguage){if(t===S.AUTO)return this.setLanguage(E());this.setPrimaryLanguage(t)}setPrimaryLanguage(t=y.primaryLanguage){if(t===S.AUTO)return this.setPrimaryLanguage(E());f.primaryLanguage=t;const i=this.getStyle().layers,r=/^\s*{\s*name\s*(:\s*(\S*))?\s*}$/,a=/^\s*name\s*(:\s*(\S*))?\s*$/,n=/^\s*{\s*name\s*(:\s*(\S*))?\s*}(\s*){\s*name\s*(:\s*(\S*))?\s*}$/,p=/^(.*)({\s*name\s*(:\s*(\S*))?\s*})(.*)$/,h=t?`name:${t}`:"name",m=["case",["has",h],["get",h],["get","name:latin"]];for(let v=0;v<i.length;v+=1){const d=i[v],L=d.layout;if(!L||!L["text-field"])continue;const l=this.getLayoutProperty(d.id,"text-field");let g;if(Array.isArray(l)&&l.length>=2&&l[0].trim().toLowerCase()==="concat"){const c=l.slice();for(let T=0;T<l.length;T+=1){const _=l[T];if((typeof _=="string"||_ instanceof String)&&r.exec(_.toString())){c[T]=m;break}else if(Array.isArray(_)&&_.length>=2&&_[0].trim().toLowerCase()==="get"&&a.exec(_[1].toString())){c[T]=m;break}else if(Array.isArray(_)&&_.length===4&&_[0].trim().toLowerCase()==="case"){c[T]=m;break}}this.setLayoutProperty(d.id,"text-field",c)}else if(Array.isArray(l)&&l.length>=2&&l[0].trim().toLowerCase()==="get"&&a.exec(l[1].toString())){const c=m;this.setLayoutProperty(d.id,"text-field",c)}else if((typeof l=="string"||l instanceof String)&&r.exec(l.toString())){const c=m;this.setLayoutProperty(d.id,"text-field",c)}else if(Array.isArray(l)&&l.length===4&&l[0].trim().toLowerCase()==="case"){const c=m;this.setLayoutProperty(d.id,"text-field",c)}else if((typeof l=="string"||l instanceof String)&&(g=n.exec(l.toString()))!==null){const c=`{${h}}${g[3]}{name${g[4]||""}}`;this.setLayoutProperty(d.id,"text-field",c)}else if((typeof l=="string"||l instanceof String)&&(g=p.exec(l.toString()))!==null){const c=`${g[1]}{${h}}${g[5]}`;this.setLayoutProperty(d.id,"text-field",c)}}}setSecondaryLanguage(t=y.secondaryLanguage){if(t===S.AUTO)return this.setSecondaryLanguage(E());f.secondaryLanguage=t;const i=this.getStyle().layers,r=/^\s*{\s*name\s*(:\s*(\S*))?\s*}$/,a=/^\s*name\s*(:\s*(\S*))?\s*$/,n=/^\s*{\s*name\s*(:\s*(\S*))?\s*}(\s*){\s*name\s*(:\s*(\S*))?\s*}$/;let p;for(let h=0;h<i.length;h+=1){const m=i[h],v=m.layout;if(!v||!v["text-field"])continue;const d=this.getLayoutProperty(m.id,"text-field");let L;if(Array.isArray(d)&&d.length>=2&&d[0].trim().toLowerCase()==="concat"){L=d.slice();let l=0;for(let g=0;g<d.length;g+=1){const c=d[g];if((typeof c=="string"||c instanceof String)&&r.exec(c.toString())){if(l===1){L[g]=`{name:${t}}`;break}l+=1}else if(Array.isArray(c)&&c.length>=2&&c[0].trim().toLowerCase()==="get"&&a.exec(c[1].toString())){if(l===1){L[g][1]=`name:${t}`;break}l+=1}else if(Array.isArray(c)&&c.length===4&&c[0].trim().toLowerCase()==="case"){if(l===1){L[g]=["get",`name:${t}`];break}l+=1}}this.setLayoutProperty(m.id,"text-field",L)}else if((typeof d=="string"||d instanceof String)&&(p=n.exec(d.toString()))!==null){const l=t?`name:${t}`:"name";L=`{name${p[1]||""}}${p[3]}{${l}}`,this.setLayoutProperty(m.id,"text-field",L)}}}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}enableTerrain(t=this.terrainExaggeration){const i=this.getTerrain(),r=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.addSource(y.terrainSourceId,{type:"raster-dem",url:y.terrainSourceURL}),this.setTerrain({source:y.terrainSourceId,exaggeration:t})};if(i){this.setTerrain(K(G({},i),{exaggeration:t}));return}this.loaded()||this.isTerrainEnabled?r():this.once("load",()=>{this.getTerrain()&&this.getSource(y.terrainSourceId)||r()})}disableTerrain(){this.isTerrainEnabled=!1,this.setTerrain(null),this.getSource(y.terrainSourceId)&&this.removeSource(y.terrainSourceId)}setTerrainExaggeration(t){this.enableTerrain(t)}}function A(e,t){this.x=e,this.y=t}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){const t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){const t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){const t=Math.cos(e),i=Math.sin(e),r=t*this.x-i*this.y,a=i*this.x+t*this.y;return this.x=r,this.y=a,this},_rotateAround:function(e,t){const i=Math.cos(e),r=Math.sin(e),a=t.x+i*(this.x-t.x)-r*(this.y-t.y),n=t.y+r*(this.x-t.x)+i*(this.y-t.y);return this.x=a,this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(e){return e instanceof A?e:Array.isArray(e)?new A(e[0],e[1]):e};const xt=s.default.supported,Ct=s.default.setRTLTextPlugin,Ut=s.default.getRTLTextPluginStatus,Nt=s.default.NavigationControl,Dt=s.default.GeolocateControl,Bt=s.default.AttributionControl,kt=s.default.LogoControl,Ot=s.default.ScaleControl,$t=s.default.FullscreenControl,Mt=s.default.TerrainControl,zt=s.default.Popup,Ht=s.default.Marker,Vt=s.default.Style,Gt=s.default.LngLat,Kt=s.default.LngLatBounds,jt=s.default.MercatorCoordinate,Wt=s.default.Evented,Ft=s.default.AJAXError,Zt=s.default.CanvasSource,qt=s.default.GeoJSONSource,Jt=s.default.ImageSource,Yt=s.default.RasterDEMTileSource,Xt=s.default.RasterTileSource,Qt=s.default.VectorTileSource,te=s.default.VideoSource,ee=s.default.prewarm,ie=s.default.clearPrewarmedResources,re=s.default.version,ae=s.default.workerCount,ne=s.default.maxParallelImageRequests,se=s.default.clearStorage,oe=s.default.workerUrl,le=s.default.addProtocol,ce=s.default.removeProtocol;export{Ft as AJAXError,Bt as AttributionControl,Zt as CanvasSource,Wt as Evented,$t as FullscreenControl,qt as GeoJSONSource,Dt as GeolocateControl,Jt as ImageSource,S as Language,Le as LanguageGeocoding,Gt as LngLat,Kt as LngLatBounds,kt as LogoControl,Rt as Map,O as MapStyle,R as MapStyleVariant,Ht as Marker,jt as MercatorCoordinate,Nt as NavigationControl,A as Point,zt as Popup,Yt as RasterDEMTileSource,Xt as RasterTileSource,x as ReferenceMapStyle,Ot as ScaleControl,D as SdkConfig,_e as ServiceError,Vt as Style,Mt as TerrainControl,Qt as VectorTileSource,te as VideoSource,le as addProtocol,ie as clearPrewarmedResources,se as clearStorage,f as config,Se as coordinates,Te as data,Ae as geocoding,be as geolocation,Ut as getRTLTextPluginStatus,ne as maxParallelImageRequests,ee as prewarm,ce as removeProtocol,Ct as setRTLTextPlugin,Ie as staticMaps,xt as supported,re as version,ae as workerCount,oe as workerUrl};
