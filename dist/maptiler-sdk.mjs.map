{"version":3,"file":"maptiler-sdk.mjs","sources":["../src/language.ts","../src/config.ts","../src/defaults.ts","../src/CustomLogoControl.ts","../src/tools.ts","../src/mapstyle/mapstylepresetlist.ts","../src/mapstyle/mapstyle.ts","../src/maplibre-borrow/src/util/dom.ts","../src/maplibre-borrow/src/util/util.ts","../src/terraincontrol.ts","../src/maplibre-borrow/src/ui/handler/mouse.ts","../src/MaptilerNavigationControl.ts","../src/Map.ts","../src/Point.ts","../src/index.ts"],"sourcesContent":["/**\n * Languages. Note that not all the languages of this list are available but the compatibility list may be expanded in the future.\n */\nconst Language = {\n  /**\n   * AUTO mode uses the language of the browser\n   */\n  AUTO: \"auto\",\n\n  /**\n   * Default fallback languages that uses latin charaters\n   */\n  LATIN: \"latin\",\n\n  /**\n   * Default fallback languages that uses non-latin charaters\n   */\n  NON_LATIN: \"nonlatin\",\n\n  /**\n   * Labels are in their local language, when available\n   */\n  LOCAL: \"\",\n\n  ALBANIAN: \"sq\",\n  AMHARIC: \"am\",\n  ARABIC: \"ar\",\n  ARMENIAN: \"hy\",\n  AZERBAIJANI: \"az\",\n  BASQUE: \"eu\",\n  BELORUSSIAN: \"be\",\n  BOSNIAN: \"bs\",\n  BRETON: \"br\",\n  BULGARIAN: \"bg\",\n  CATALAN: \"ca\",\n  CHINESE: \"zh\",\n  CORSICAN: \"co\",\n  CROATIAN: \"hr\",\n  CZECH: \"cs\",\n  DANISH: \"da\",\n  DUTCH: \"nl\",\n  ENGLISH: \"en\",\n  ESPERANTO: \"eo\",\n  ESTONIAN: \"et\",\n  FINNISH: \"fi\",\n  FRENCH: \"fr\",\n  FRISIAN: \"fy\",\n  GEORGIAN: \"ka\",\n  GERMAN: \"de\",\n  GREEK: \"el\",\n  HEBREW: \"he\",\n  HINDI: \"hi\",\n  HUNGARIAN: \"hu\",\n  ICELANDIC: \"is\",\n  INDONESIAN: \"id\",\n  IRISH: \"ga\",\n  ITALIAN: \"it\",\n  JAPANESE: \"ja\",\n  JAPANESE_HIRAGANA: \"ja-Hira\",\n  JAPANESE_KANA: \"ja_kana\",\n  JAPANESE_LATIN: \"ja_rm\",\n  JAPANESE_2018: \"ja-Latn\",\n  KANNADA: \"kn\",\n  KAZAKH: \"kk\",\n  KOREAN: \"ko\",\n  KOREAN_LATIN: \"ko-Latn\",\n  KURDISH: \"ku\",\n  ROMAN_LATIN: \"la\",\n  LATVIAN: \"lv\",\n  LITHUANIAN: \"lt\",\n  LUXEMBOURGISH: \"lb\",\n  MACEDONIAN: \"mk\",\n  MALAYALAM: \"ml\",\n  MALTESE: \"mt\",\n  NORWEGIAN: \"no\",\n  OCCITAN: \"oc\",\n  POLISH: \"pl\",\n  PORTUGUESE: \"pt\",\n  ROMANIAN: \"ro\",\n  ROMANSH: \"rm\",\n  RUSSIAN: \"ru\",\n  SCOTTISH_GAELIC: \"gd\",\n  SERBIAN_CYRILLIC: \"sr\",\n  SERBIAN_LATIN: \"sr-Latn\",\n  SLOVAK: \"sk\",\n  SLOVENE: \"sl\",\n  SPANISH: \"es\",\n  SWEDISH: \"sv\",\n  TAMIL: \"ta\",\n  TELUGU: \"te\",\n  THAI: \"th\",\n  TURKISH: \"tr\",\n  UKRAINIAN: \"uk\",\n  WELSH: \"cy\",\n} as const;\n\nconst languageCodeSet = new Set(Object.values(Language));\n\ntype Values<T> = T[keyof T];\n\n/**\n * Built-in languages values as strings\n */\ntype LanguageString = Values<typeof Language>;\n\nfunction getBrowserLanguage(): LanguageString {\n  if (typeof navigator === \"undefined\") {\n    return Intl.DateTimeFormat()\n      .resolvedOptions()\n      .locale.split(\"-\")[0] as LanguageString;\n  }\n\n  const canditatelangs = Array.from(\n    new Set(navigator.languages.map((l) => l.split(\"-\")[0]))\n  ).filter((l) => languageCodeSet.has(l as LanguageString));\n\n  return canditatelangs.length\n    ? (canditatelangs[0] as LanguageString)\n    : Language.LATIN;\n}\n\nexport { Language, LanguageString, getBrowserLanguage };\n","import EventEmitter from \"events\";\nimport { Language, LanguageString } from \"./language\";\nimport { config as clientConfig, FetchFunction } from \"@maptiler/client\";\nimport { Unit } from \"./unit\";\n\n/**\n * Configuration class for the SDK\n */\nclass SdkConfig extends EventEmitter {\n  /**\n   * The primary language. By default, the language of the web browser is used.\n   */\n  primaryLanguage: LanguageString | null = Language.AUTO;\n\n  /**\n   * The secondary language, to overwrite the default language defined in the map style.\n   * This settings is highly dependant on the style compatibility and may not work in most cases.\n   */\n  secondaryLanguage: LanguageString | null = null;\n\n  /**\n   * Unit to be used\n   */\n  private _unit: Unit = \"metric\";\n\n  /**\n   * MapTiler Cloud API key\n   */\n  private _apiKey = \"Not defined yet.\";\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Set the unit system\n   */\n  set unit(u: Unit) {\n    this._unit = u;\n    this.emit(\"unit\", u);\n  }\n\n  /**\n   * Get the unit system\n   */\n  get unit(): Unit {\n    return this._unit;\n  }\n\n  /**\n   * Set the MapTiler Cloud API key\n   */\n  set apiKey(k: string) {\n    this._apiKey = k;\n    clientConfig.apiKey = k;\n    this.emit(\"apiKey\", k);\n  }\n\n  /**\n   * Get the MapTiler Cloud API key\n   */\n  get apiKey(): string {\n    return this._apiKey;\n  }\n\n  /**\n   * Set a the custom fetch function to replace the default one\n   */\n  set fetch(f: FetchFunction) {\n    clientConfig.fetch = f;\n  }\n\n  /**\n   * Get the fetch fucntion\n   */\n  get fetch(): FetchFunction | null {\n    return clientConfig.fetch;\n  }\n}\n\nconst config = new SdkConfig();\n\nexport { config, SdkConfig };\n","import { Language } from \"./language\";\nimport { MapStyle } from \"./mapstyle/mapstyle\";\n\n/**\n * Some default settings for the SDK\n */\nconst defaults = {\n  maptilerLogoURL: \"https://api.maptiler.com/resources/logo.svg\",\n  maptilerURL: \"https://www.maptiler.com/\",\n  maptilerApiHost: \"api.maptiler.com\",\n  rtlPluginURL:\n    \"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js\",\n  primaryLanguage: Language.LATIN,\n  secondaryLanguage: Language.NON_LATIN,\n  terrainSourceURL: \"https://api.maptiler.com/tiles/terrain-rgb/tiles.json\",\n  terrainSourceId: \"maptiler-terrain\",\n};\n\nObject.freeze(defaults);\n\nexport { defaults };\n","import * as maplibre from \"maplibre-gl\";\nimport { defaults } from \"./defaults\";\nimport { Map } from \"./Map\";\n\ntype LogoOptions = maplibre.LogoOptions & {\n  logoURL?: string;\n  linkURL?: string;\n};\n\n/**\n * This LogoControl extends the MapLibre LogoControl but instead can use any image URL and\n * any link URL. By default this is using MapTiler logo and URL.\n */\nexport class CustomLogoControl extends maplibre.LogoControl {\n  private logoURL = \"\";\n  private linkURL = \"\";\n\n  constructor(options: LogoOptions = {}) {\n    super(options);\n\n    this.logoURL = options.logoURL ?? defaults.maptilerLogoURL;\n    this.linkURL = options.linkURL ?? defaults.maptilerURL;\n  }\n\n  onAdd(map: Map): HTMLElement {\n    this._map = map;\n    this._compact = this.options && this.options.compact;\n    this._container = window.document.createElement(\"div\");\n    this._container.className = \"maplibregl-ctrl\";\n    const anchor = window.document.createElement(\"a\");\n    anchor.style.backgroundRepeat = \"no-repeat\";\n    anchor.style.cursor = \"pointer\";\n    anchor.style.display = \"block\";\n    anchor.style.height = \"23px\";\n    anchor.style.margin = \"0 0 -4px -4px\";\n    anchor.style.overflow = \"hidden\";\n    anchor.style.width = \"88px\";\n    anchor.style.backgroundImage = `url(${this.logoURL})`;\n    anchor.style.backgroundSize = \"100px 30px\";\n    anchor.style.width = \"100px\";\n    anchor.style.height = \"30px\";\n\n    anchor.target = \"_blank\";\n    anchor.rel = \"noopener nofollow\";\n    anchor.href = this.linkURL;\n    anchor.setAttribute(\n      \"aria-label\",\n      this._map._getUIString(\"LogoControl.Title\")\n    );\n    anchor.setAttribute(\"rel\", \"noopener nofollow\");\n    this._container.appendChild(anchor);\n    this._container.style.display = \"block\";\n\n    this._map.on(\"resize\", this._updateCompact);\n    this._updateCompact();\n\n    return this._container;\n  }\n}\n","import * as maplibre from \"maplibre-gl\";\nimport { config } from \"./config\";\nimport { defaults } from \"./defaults\";\n\nexport function enableRTL() {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const maplibrePackage = maplibre as any;\n  if (maplibrePackage.getRTLTextPluginStatus() === \"unavailable\") {\n    maplibrePackage.setRTLTextPlugin(\n      defaults.rtlPluginURL,\n      null,\n      true // Lazy load the plugin\n    );\n  }\n}\n","import { MapStyleVariant, ReferenceMapStyle } from \"./mapstyle\";\n\ntype MapStylePresetList = Array<{\n  referenceStyleID: string;\n  name: string;\n  description: string;\n  variants: Array<{\n    id: string;\n    name: string;\n    variantType: string;\n    description: string;\n    imageURL: string;\n  }>;\n}>;\n\n/**\n * All the styles and variants maintained by MapTiler.\n */\nexport type MapStyleType = {\n  /**\n   * Suitable for navigation, with high level of detail on urban areas.\n   */\n  STREETS: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n    /**\n     * Suitable for navigation, with high level of detail on urban areas, in dark mode.\n     */\n    DARK: MapStyleVariant;\n    /**\n     * Suitable for navigation, with high level of detail on urban areas, in light mode.\n     */\n    LIGHT: MapStyleVariant;\n    /**\n     * Suitable for navigation, with high level of detail on urban areas, with a pastel color palette.\n     */\n    PASTEL: MapStyleVariant;\n  };\n\n  /**\n   * Suitable for outdoor activities. With elevation isolines and hillshading.\n   */\n  OUTDOOR: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n  };\n\n  /**\n   * Suitabe for winter outdoor activities. With ski tracks, elevation isolines and hillshading.\n   */\n  WINTER: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n  };\n\n  /**\n   * High resolution imagery only, without any label.\n   */\n  SATELLITE: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n  };\n\n  /**\n   * High resolution imagery with labels, political borders and roads.\n   */\n  HYBRID: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n  };\n\n  BASIC: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n    DARK: MapStyleVariant;\n    LIGHT: MapStyleVariant;\n  };\n\n  BRIGHT: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n    DARK: MapStyleVariant;\n    LIGHT: MapStyleVariant;\n    PASTEL: MapStyleVariant;\n  };\n\n  OPENSTREETMAP: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n  };\n\n  TOPO: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n    SHINY: MapStyleVariant;\n    PASTEL: MapStyleVariant;\n    TOPOGRAPHIQUE: MapStyleVariant;\n  };\n\n  VOYAGER: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n    DARK: MapStyleVariant;\n    LIGHT: MapStyleVariant;\n    VINTAGE: MapStyleVariant;\n  };\n\n  TONER: ReferenceMapStyle & {\n    DEFAULT: MapStyleVariant;\n    BACKGROUND: MapStyleVariant;\n    LITE: MapStyleVariant;\n    LINES: MapStyleVariant;\n  };\n};\n\nexport const mapStylePresetList: MapStylePresetList = [\n  {\n    referenceStyleID: \"STREETS\",\n    name: \"Streets\",\n    description: \"\",\n    variants: [\n      {\n        id: \"streets-v2\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"streets-v2-dark\",\n        name: \"Dark\",\n        variantType: \"DARK\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"streets-v2-light\",\n        name: \"Light\",\n        variantType: \"LIGHT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"streets-v2-pastel\",\n        name: \"Pastel\",\n        variantType: \"PASTEL\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"OUTDOOR\",\n    name: \"Outdoor\",\n    description: \"\",\n    variants: [\n      {\n        id: \"outdoor-v2\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"WINTER\",\n    name: \"Winter\",\n    description: \"\",\n    variants: [\n      {\n        id: \"winter-v2\",\n        name: \"Winter\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"SATELLITE\",\n    name: \"Satellite\",\n    description: \"\",\n    variants: [\n      {\n        id: \"satellite\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"HYBRID\",\n    name: \"Hybrid\",\n    description: \"\",\n    variants: [\n      {\n        id: \"hybrid\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"BASIC\",\n    name: \"Basic\",\n    description: \"\",\n    variants: [\n      {\n        id: \"basic-v2\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"basic-v2-dark\",\n        name: \"Dark\",\n        variantType: \"DARK\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"basic-v2-light\",\n        name: \"Light\",\n        variantType: \"LIGHT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"BRIGHT\",\n    name: \"Bright\",\n    description: \"\",\n    variants: [\n      {\n        id: \"bright-v2\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"bright-v2-dark\",\n        name: \"Dark\",\n        variantType: \"DARK\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"bright-v2-light\",\n        name: \"Light\",\n        variantType: \"LIGHT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"bright-v2-pastel\",\n        name: \"Pastel\",\n        variantType: \"PASTEL\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"OPENSTREETMAP\",\n    name: \"OpenStreetMap\",\n    description: \"\",\n    variants: [\n      {\n        id: \"openstreetmap\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"TOPO\",\n    name: \"Topo\",\n    description: \"\",\n    variants: [\n      {\n        id: \"topo-v2\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"topo-v2-shiny\",\n        name: \"Shiny\",\n        variantType: \"SHINY\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"topo-v2-pastel\",\n        name: \"Pastel\",\n        variantType: \"PASTEL\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"topo-v2-topographique\",\n        name: \"Topographique\",\n        variantType: \"TOPOGRAPHIQUE\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"VOYAGER\",\n    name: \"Voyager\",\n    description: \"\",\n    variants: [\n      {\n        id: \"voyager-v2\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"voyager-v2-darkmatter\",\n        name: \"Darkmatter\",\n        variantType: \"DARK\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"voyager-v2-positron\",\n        name: \"Positron\",\n        variantType: \"LIGHT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"voyager-v2-vintage\",\n        name: \"Vintage\",\n        variantType: \"VINTAGE\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n\n  {\n    referenceStyleID: \"TONER\",\n    name: \"Toner\",\n    description: \"\",\n    variants: [\n      {\n        id: \"toner-v2\",\n        name: \"Default\",\n        variantType: \"DEFAULT\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"toner-v2-background\",\n        name: \"Background\",\n        variantType: \"BACKGROUND\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"toner-v2-lite\",\n        name: \"Lite\",\n        variantType: \"LITE\",\n        description: \"\",\n        imageURL: \"\",\n      },\n      {\n        id: \"toner-v2-lines\",\n        name: \"Lines\",\n        variantType: \"LINES\",\n        description: \"\",\n        imageURL: \"\",\n      },\n    ],\n  },\n];\n","import satelliteBuiltin from \"./builtinMapStyles/satellite.json\";\nimport { StyleSpecification } from \"maplibre-gl\";\nimport { mapStylePresetList, MapStyleType } from \"./mapstylepresetlist\";\n\nconst builtInStyles = {\n  satellite: satelliteBuiltin,\n};\n\n/**\n * Expand the map style provided as argument of the Map constructor\n * @param style\n * @returns\n */\nexport function expandMapStyle(style): string {\n  // testing if the style provided is of form \"maptiler://some-style\"\n  const maptilerDomainRegex = /^maptiler:\\/\\/(.*)/;\n  let match;\n  const trimmed = style.trim();\n  let expandedStyle;\n\n  // The style was possibly already given as expanded URL\n  if (trimmed.startsWith(\"http://\") || trimmed.startsWith(\"https://\")) {\n    expandedStyle = trimmed;\n  } else if ((match = maptilerDomainRegex.exec(trimmed)) !== null) {\n    expandedStyle = `https://api.maptiler.com/maps/${match[1]}/style.json`;\n  } else {\n    // The style could also possibly just be the name of the style without any URI style\n    expandedStyle = `https://api.maptiler.com/maps/${trimmed}/style.json`;\n  }\n\n  return expandedStyle;\n}\n\nfunction makeReferenceStyleProxy(referenceStyle: ReferenceMapStyle) {\n  return new Proxy(referenceStyle, {\n    get(target, prop, receiver) {\n      if (target.hasVariant(prop as string)) {\n        return target.getVariant(prop as string);\n      }\n\n      // This variant does not exist for this style, but since it's full uppercase\n      // we guess that the dev tries to access a style variant. So instead of\n      // returning the default (STREETS.DEFAULT), we return the non-variant of the current style\n      if (prop.toString().toUpperCase() === (prop as string)) {\n        return referenceStyle.getDefaultVariant();\n      }\n\n      return Reflect.get(target, prop, receiver);\n    },\n  });\n}\n\n/**\n * An instance of MapStyleVariant contains information about a style to use that belong to a reference style\n */\nexport class MapStyleVariant {\n  constructor(\n    /**\n     * Human-friendly name\n     */\n    private name: string,\n\n    /**\n     * Variant name the variant is addressed to from its reference style: `MapStyle.REFERNCE_STYLE_NAME.VARIANT_TYPE`\n     */\n    private variantType: string,\n\n    /**\n     * MapTiler Cloud id\n     */\n    private id: string,\n\n    /**\n     * Reference map style, used to retrieve sibling variants\n     */\n    private referenceStyle: ReferenceMapStyle,\n\n    /**\n     * Human-friendly description\n     */\n    private description: string,\n\n    /**\n     * URL to an image describing the style variant\n     */\n    private imageURL: string\n  ) {}\n\n  /**\n   * Get the human-friendly name\n   * @returns\n   */\n  getName(): string {\n    return this.name;\n  }\n\n  getFullName(): string {\n    return `${this.referenceStyle.getName()} ${this.name}`;\n  }\n\n  /**\n   * Get the variant type (eg. \"DEFAULT\", \"DARK\", \"PASTEL\", etc.)\n   * @returns\n   */\n  getType(): string {\n    return this.variantType;\n  }\n\n  /**\n   * Get the style as usable by MapLibre, a string (URL) or a plain style description (StyleSpecification)\n   * @returns\n   */\n  getUsableStyle(): string | StyleSpecification {\n    if (this.id in builtInStyles) {\n      return builtInStyles[this.id];\n    }\n    return expandMapStyle(this.id);\n  }\n\n  /**\n   * Get the MapTiler Cloud id\n   * @returns\n   */\n  getId(): string {\n    return this.id;\n  }\n\n  /**\n   * Get the human-friendly description\n   */\n  getDescription(): string {\n    return this.description;\n  }\n\n  /**\n   * Get the reference style this variant belongs to\n   * @returns\n   */\n  getReferenceStyle(): ReferenceMapStyle {\n    return this.referenceStyle;\n  }\n\n  /**\n   * Check if a variant of a given type exists for _this_ variants\n   * (eg. if this is a \"DARK\", then we can check if there is a \"LIGHT\" variant of it)\n   * @param variantType\n   * @returns\n   */\n  hasVariant(variantType: string): boolean {\n    return this.referenceStyle.hasVariant(variantType);\n  }\n\n  /**\n   * Retrieve the variant of a given type. If not found, will return the \"DEFAULT\" variant.\n   * (eg. _this_ \"DARK\" variant does not have any \"PASTEL\" variant, then the \"DEFAULT\" is returned)\n   * @param variantType\n   * @returns\n   */\n  getVariant(variantType: string): MapStyleVariant {\n    return this.referenceStyle.getVariant(variantType);\n  }\n\n  /**\n   * Get all the variants for _this_ variants, except _this_ current one\n   * @returns\n   */\n  getVariants(): Array<MapStyleVariant> {\n    return this.referenceStyle.getVariants().filter((v) => v !== this);\n  }\n\n  /**\n   * Get the image URL that represent _this_ variant\n   * @returns\n   */\n  getImageURL(): string {\n    return this.imageURL;\n  }\n}\n\n/**\n * An instance of reference style contains a list of StyleVariants ordered by relevance\n */\nexport class ReferenceMapStyle {\n  /**\n   * Variants that belong to this reference style, key being the reference type\n   */\n  private variants: { [key: string]: MapStyleVariant } = {};\n\n  /**\n   * Variants that belong to this reference style, ordered by relevance\n   */\n  private orderedVariants: Array<MapStyleVariant> = [];\n\n  constructor(\n    /**\n     * Human-friendly name of this reference style\n     */\n    private name: string,\n\n    /**\n     * ID of this reference style\n     */\n    private id: string\n  ) {}\n\n  /**\n   * Get the human-friendly name of this reference style\n   * @returns\n   */\n  getName(): string {\n    return this.name;\n  }\n\n  /**\n   * Get the id of _this_ reference style\n   * @returns\n   */\n  getId(): string {\n    return this.id;\n  }\n\n  /**\n   * Add a variant to _this_ reference style\n   * @param v\n   */\n  addVariant(v: MapStyleVariant) {\n    this.variants[v.getType()] = v;\n    this.orderedVariants.push(v);\n  }\n\n  /**\n   * Check if a given variant type exists for this reference style\n   * @param variantType\n   * @returns\n   */\n  hasVariant(variantType: string): boolean {\n    return variantType in this.variants;\n  }\n\n  /**\n   * Get a given variant. If the given type of variant does not exist for this reference style,\n   * then the most relevant default variant is returned instead\n   * @param variantType\n   * @returns\n   */\n  getVariant(variantType: string): MapStyleVariant {\n    return variantType in this.variants\n      ? this.variants[variantType]\n      : this.orderedVariants[0];\n  }\n\n  /**\n   * Get the list of variants for this reference style\n   * @returns\n   */\n  getVariants(): Array<MapStyleVariant> {\n    return Object.values(this.variants);\n  }\n\n  /**\n   * Get the defualt variant for this reference style\n   * @returns\n   */\n  getDefaultVariant(): MapStyleVariant {\n    return this.orderedVariants[0];\n  }\n}\n\nfunction buildMapStyles(): MapStyleType {\n  const mapStyle = {};\n\n  for (let i = 0; i < mapStylePresetList.length; i += 1) {\n    const refStyleInfo = mapStylePresetList[i];\n\n    const refStyle = makeReferenceStyleProxy(\n      new ReferenceMapStyle(refStyleInfo.name, refStyleInfo.referenceStyleID)\n    );\n\n    for (let j = 0; j < refStyleInfo.variants.length; j += 1) {\n      const variantInfo = refStyleInfo.variants[j];\n      const variant = new MapStyleVariant(\n        variantInfo.name, // name\n        variantInfo.variantType, // variantType\n        variantInfo.id, // id\n        refStyle, // referenceStyle\n        variantInfo.description,\n        variantInfo.imageURL // imageURL\n      );\n\n      refStyle.addVariant(variant);\n    }\n    mapStyle[refStyleInfo.referenceStyleID] = refStyle;\n  }\n  return mapStyle as MapStyleType;\n}\n\n/**\n * Contains all the reference map style created by MapTiler team as well as all the variants.\n * For example, `MapStyle.STREETS` and the variants:\n * - `MapStyle.STREETS.DARK`\n * - `MapStyle.STREETS.LIGHT`\n * - `MapStyle.STREETS.PASTEL`\n *\n */\nconst MapStyle: MapStyleType = buildMapStyles();\n\nfunction styleToStyle(\n  style:\n    | string\n    | ReferenceMapStyle\n    | MapStyleVariant\n    | StyleSpecification\n    | null\n    | undefined\n): string | StyleSpecification {\n  if (!style) {\n    return MapStyle[mapStylePresetList[0].referenceStyleID]\n      .getDefaultVariant()\n      .getUsableStyle();\n  }\n\n  // If the style is given as a string and this corresponds to a built-in style\n  if (typeof style === \"string\" && style.toLowerCase() in builtInStyles) {\n    return builtInStyles[style.toLowerCase()];\n  }\n\n  // If the provided style is a shorthand (eg. \"streets-v2\") or a full style URL\n  if (typeof style === \"string\" || style instanceof String) {\n    return expandMapStyle(style);\n  }\n\n  if (style instanceof MapStyleVariant) {\n    return style.getUsableStyle();\n  }\n\n  if (style instanceof ReferenceMapStyle) {\n    return style.getDefaultVariant().getUsableStyle();\n  }\n\n  return style as StyleSpecification;\n}\n\nexport { MapStyle, styleToStyle };\n","// @ts-nocheck\nimport Point from \"@mapbox/point-geometry\";\n\nexport default class DOM {\n  private static readonly docStyle =\n    typeof window !== \"undefined\" &&\n    window.document &&\n    window.document.documentElement.style;\n\n  private static userSelect: string;\n\n  private static selectProp = DOM.testProp([\n    \"userSelect\",\n    \"MozUserSelect\",\n    \"WebkitUserSelect\",\n    \"msUserSelect\",\n  ]);\n\n  private static transformProp = DOM.testProp([\"transform\", \"WebkitTransform\"]);\n\n  private static testProp(props: string[]): string {\n    if (!DOM.docStyle) return props[0];\n    for (let i = 0; i < props.length; i++) {\n      if (props[i] in DOM.docStyle) {\n        return props[i];\n      }\n    }\n    return props[0];\n  }\n\n  public static create<K extends keyof HTMLElementTagNameMap>(\n    tagName: K,\n    className?: string,\n    container?: HTMLElement\n  ): HTMLElementTagNameMap[K] {\n    const el = window.document.createElement(tagName);\n    if (className !== undefined) el.className = className;\n    if (container) container.appendChild(el);\n    return el;\n  }\n\n  public static createNS(namespaceURI: string, tagName: string) {\n    const el = window.document.createElementNS(namespaceURI, tagName);\n    return el;\n  }\n\n  public static disableDrag() {\n    if (DOM.docStyle && DOM.selectProp) {\n      DOM.userSelect = DOM.docStyle[DOM.selectProp];\n      DOM.docStyle[DOM.selectProp] = \"none\";\n    }\n  }\n\n  public static enableDrag() {\n    if (DOM.docStyle && DOM.selectProp) {\n      DOM.docStyle[DOM.selectProp] = DOM.userSelect;\n    }\n  }\n\n  public static setTransform(el: HTMLElement, value: string) {\n    el.style[DOM.transformProp] = value;\n  }\n\n  public static addEventListener(\n    target: any,\n    type: any,\n    callback: any,\n    options: {\n      passive?: boolean;\n      capture?: boolean;\n    } = {}\n  ) {\n    if (\"passive\" in options) {\n      target.addEventListener(type, callback, options);\n    } else {\n      target.addEventListener(type, callback, options.capture);\n    }\n  }\n\n  public static removeEventListener(\n    target: any,\n    type: any,\n    callback: any,\n    options: {\n      passive?: boolean;\n      capture?: boolean;\n    } = {}\n  ) {\n    if (\"passive\" in options) {\n      target.removeEventListener(type, callback, options);\n    } else {\n      target.removeEventListener(type, callback, options.capture);\n    }\n  }\n\n  // Suppress the next click, but only if it's immediate.\n  private static suppressClickInternal(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    window.removeEventListener(\"click\", DOM.suppressClickInternal, true);\n  }\n\n  public static suppressClick() {\n    window.addEventListener(\"click\", DOM.suppressClickInternal, true);\n    window.setTimeout(() => {\n      window.removeEventListener(\"click\", DOM.suppressClickInternal, true);\n    }, 0);\n  }\n\n  public static mousePos(el: HTMLElement, e: MouseEvent | Touch) {\n    const rect = el.getBoundingClientRect();\n    return new Point(\n      e.clientX - rect.left - el.clientLeft,\n      e.clientY - rect.top - el.clientTop\n    );\n  }\n\n  public static touchPos(el: HTMLElement, touches: TouchList) {\n    const rect = el.getBoundingClientRect();\n    const points: Point[] = [];\n    for (let i = 0; i < touches.length; i++) {\n      points.push(\n        new Point(\n          touches[i].clientX - rect.left - el.clientLeft,\n          touches[i].clientY - rect.top - el.clientTop\n        )\n      );\n    }\n    return points;\n  }\n\n  public static mouseButton(e: MouseEvent) {\n    return e.button;\n  }\n\n  public static remove(node: HTMLElement) {\n    if (node.parentNode) {\n      node.parentNode.removeChild(node);\n    }\n  }\n}\n","// @ts-nocheck\nimport UnitBezier from \"@mapbox/unitbezier\";\n\nimport Point from \"@mapbox/point-geometry\";\n\nimport type { Callback } from \"../types/callback\";\n\n/**\n * @module util\n * @private\n */\n\n/**\n * Given a value `t` that varies between 0 and 1, return\n * an interpolation function that eases between 0 and 1 in a pleasing\n * cubic in-out fashion.\n *\n * @private\n */\nexport function easeCubicInOut(t: number): number {\n  if (t <= 0) return 0;\n  if (t >= 1) return 1;\n  const t2 = t * t,\n    t3 = t2 * t;\n  return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n}\n\n/**\n * Given given (x, y), (x1, y1) control points for a bezier curve,\n * return a function that interpolates along that curve.\n *\n * @param p1x control point 1 x coordinate\n * @param p1y control point 1 y coordinate\n * @param p2x control point 2 x coordinate\n * @param p2y control point 2 y coordinate\n * @private\n */\nexport function bezier(\n  p1x: number,\n  p1y: number,\n  p2x: number,\n  p2y: number\n): (t: number) => number {\n  const bezier = new UnitBezier(p1x, p1y, p2x, p2y);\n  return function (t: number) {\n    return bezier.solve(t);\n  };\n}\n\n/**\n * A default bezier-curve powered easing function with\n * control points (0.25, 0.1) and (0.25, 1)\n *\n * @private\n */\nexport const ease = bezier(0.25, 0.1, 0.25, 1);\n\n/**\n * constrain n to the given range via min + max\n *\n * @param n value\n * @param min the minimum value to be returned\n * @param max the maximum value to be returned\n * @returns the clamped value\n * @private\n */\nexport function clamp(n: number, min: number, max: number): number {\n  return Math.min(max, Math.max(min, n));\n}\n\n/**\n * constrain n to the given range, excluding the minimum, via modular arithmetic\n *\n * @param n value\n * @param min the minimum value to be returned, exclusive\n * @param max the maximum value to be returned, inclusive\n * @returns constrained number\n * @private\n */\nexport function wrap(n: number, min: number, max: number): number {\n  const d = max - min;\n  const w = ((((n - min) % d) + d) % d) + min;\n  return w === min ? max : w;\n}\n\n/*\n * Call an asynchronous function on an array of arguments,\n * calling `callback` with the completed results of all calls.\n *\n * @param array input to each call of the async function.\n * @param fn an async function with signature (data, callback)\n * @param callback a callback run after all async work is done.\n * called with an array, containing the results of each async call.\n * @private\n */\nexport function asyncAll<Item, Result>(\n  array: Array<Item>,\n  fn: (item: Item, fnCallback: Callback<Result>) => void,\n  callback: Callback<Array<Result>>\n) {\n  if (!array.length) {\n    return callback(null, []);\n  }\n  let remaining = array.length;\n  const results = new Array(array.length);\n  let error = null;\n  array.forEach((item, i) => {\n    fn(item, (err, result) => {\n      if (err) error = err;\n      results[i] = result as any as Result; // https://github.com/facebook/flow/issues/2123\n      if (--remaining === 0) callback(error, results);\n    });\n  });\n}\n\n/*\n * Compute the difference between the keys in one object and the keys\n * in another object.\n *\n * @returns keys difference\n * @private\n */\nexport function keysDifference<S, T>(\n  obj: { [key: string]: S },\n  other: { [key: string]: T }\n): Array<string> {\n  const difference = [];\n  for (const i in obj) {\n    if (!(i in other)) {\n      difference.push(i);\n    }\n  }\n  return difference;\n}\n\n/**\n * Given a destination object and optionally many source objects,\n * copy all properties from the source objects into the destination.\n * The last source object given overrides properties from previous\n * source objects.\n *\n * @param dest destination object\n * @param sources sources from which properties are pulled\n * @private\n */\nexport function extend(dest: any, ...sources: Array<any>): any {\n  for (const src of sources) {\n    for (const k in src) {\n      dest[k] = src[k];\n    }\n  }\n  return dest;\n}\n\n/**\n * Given an object and a number of properties as strings, return version\n * of that object with only those properties.\n *\n * @param src the object\n * @param properties an array of property names chosen\n * to appear on the resulting object.\n * @returns object with limited properties.\n * @example\n * var foo = { name: 'Charlie', age: 10 };\n * var justName = pick(foo, ['name']);\n * // justName = { name: 'Charlie' }\n * @private\n */\nexport function pick(src: any, properties: Array<string>): any {\n  const result = {};\n  for (let i = 0; i < properties.length; i++) {\n    const k = properties[i];\n    if (k in src) {\n      result[k] = src[k];\n    }\n  }\n  return result;\n}\n\nlet id = 1;\n\n/**\n * Return a unique numeric id, starting at 1 and incrementing with\n * each call.\n *\n * @returns unique numeric id.\n * @private\n */\nexport function uniqueId(): number {\n  return id++;\n}\n\n/**\n * Return whether a given value is a power of two\n * @private\n */\nexport function isPowerOfTwo(value: number): boolean {\n  return (Math.log(value) / Math.LN2) % 1 === 0;\n}\n\n/**\n * Return the next power of two, or the input value if already a power of two\n * @private\n */\nexport function nextPowerOfTwo(value: number): number {\n  if (value <= 1) return 1;\n  return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n}\n\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n *\n * @param fns list of member function names\n * @param context the context value\n * @example\n * function MyClass() {\n *   bindAll(['ontimer'], this);\n *   this.name = 'Tom';\n * }\n * MyClass.prototype.ontimer = function() {\n *   alert(this.name);\n * };\n * var myClass = new MyClass();\n * setTimeout(myClass.ontimer, 100);\n * @private\n */\nexport function bindAll(fns: Array<string>, context: any): void {\n  fns.forEach((fn) => {\n    if (!context[fn]) {\n      return;\n    }\n    context[fn] = context[fn].bind(context);\n  });\n}\n\n/**\n * Create an object by mapping all the values of an existing object while\n * preserving their keys.\n *\n * @private\n */\nexport function mapObject(input: any, iterator: Function, context?: any): any {\n  const output = {};\n  for (const key in input) {\n    output[key] = iterator.call(context || this, input[key], key, input);\n  }\n  return output;\n}\n\n/**\n * Create an object by filtering out values of an existing object.\n *\n * @private\n */\nexport function filterObject(\n  input: any,\n  iterator: Function,\n  context?: any\n): any {\n  const output = {};\n  for (const key in input) {\n    if (iterator.call(context || this, input[key], key, input)) {\n      output[key] = input[key];\n    }\n  }\n  return output;\n}\n\nimport deepEqual from \"../style-spec/util/deep_equal\";\nexport { deepEqual };\n\n/**\n * Deeply clones two objects.\n *\n * @private\n */\nexport function clone<T>(input: T): T {\n  if (Array.isArray(input)) {\n    return input.map(clone) as any as T;\n  } else if (typeof input === \"object\" && input) {\n    return mapObject(input, clone) as any as T;\n  } else {\n    return input;\n  }\n}\n\n/**\n * Check if two arrays have at least one common element.\n *\n * @private\n */\nexport function arraysIntersect<T>(a: Array<T>, b: Array<T>): boolean {\n  for (let l = 0; l < a.length; l++) {\n    if (b.indexOf(a[l]) >= 0) return true;\n  }\n  return false;\n}\n\n/**\n * Print a warning message to the console and ensure duplicate warning messages\n * are not printed.\n *\n * @private\n */\nconst warnOnceHistory: { [key: string]: boolean } = {};\n\nexport function warnOnce(message: string): void {\n  if (!warnOnceHistory[message]) {\n    // console isn't defined in some WebWorkers, see #2558\n    if (typeof console !== \"undefined\") console.warn(message);\n    warnOnceHistory[message] = true;\n  }\n}\n\n/**\n * Indicates if the provided Points are in a counter clockwise (true) or clockwise (false) order\n *\n * @private\n * @returns true for a counter clockwise set of points\n */\n// http://bryceboe.com/2006/10/23/line-segment-intersection-algorithm/\nexport function isCounterClockwise(a: Point, b: Point, c: Point): boolean {\n  return (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x);\n}\n\n/**\n * Returns the signed area for the polygon ring.  Positive areas are exterior rings and\n * have a clockwise winding.  Negative areas are interior rings and have a counter clockwise\n * ordering.\n *\n * @private\n * @param ring Exterior or interior ring\n */\nexport function calculateSignedArea(ring: Array<Point>): number {\n  let sum = 0;\n  for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n    p1 = ring[i];\n    p2 = ring[j];\n    sum += (p2.x - p1.x) * (p1.y + p2.y);\n  }\n  return sum;\n}\n\n/**\n * Detects closed polygons, first + last point are equal\n *\n * @private\n * @param points array of points\n * @return true if the points are a closed polygon\n */\nexport function isClosedPolygon(points: Array<Point>): boolean {\n  // If it is 2 points that are the same then it is a point\n  // If it is 3 points with start and end the same then it is a line\n  if (points.length < 4) return false;\n\n  const p1 = points[0];\n  const p2 = points[points.length - 1];\n\n  if (Math.abs(p1.x - p2.x) > 0 || Math.abs(p1.y - p2.y) > 0) {\n    return false;\n  }\n\n  // polygon simplification can produce polygons with zero area and more than 3 points\n  return Math.abs(calculateSignedArea(points)) > 0.01;\n}\n\n/**\n * Converts spherical coordinates to cartesian coordinates.\n *\n * @private\n * @param spherical Spherical coordinates, in [radial, azimuthal, polar]\n * @return cartesian coordinates in [x, y, z]\n */\n\nexport function sphericalToCartesian([r, azimuthal, polar]: [\n  number,\n  number,\n  number\n]): {\n  x: number;\n  y: number;\n  z: number;\n} {\n  // We abstract \"north\"/\"up\" (compass-wise) to be 0° when really this is 90° (π/2):\n  // correct for that here\n  azimuthal += 90;\n\n  // Convert azimuthal and polar angles to radians\n  azimuthal *= Math.PI / 180;\n  polar *= Math.PI / 180;\n\n  return {\n    x: r * Math.cos(azimuthal) * Math.sin(polar),\n    y: r * Math.sin(azimuthal) * Math.sin(polar),\n    z: r * Math.cos(polar),\n  };\n}\n\n/**\n *  Returns true if the when run in the web-worker context.\n *\n * @private\n * @returns {boolean}\n */\nexport function isWorker(): boolean {\n  // @ts-ignore\n  return (\n    typeof WorkerGlobalScope !== \"undefined\" &&\n    typeof self !== \"undefined\" &&\n    self instanceof WorkerGlobalScope\n  );\n}\n\n/**\n * Parses data from 'Cache-Control' headers.\n *\n * @private\n * @param cacheControl Value of 'Cache-Control' header\n * @return object containing parsed header info.\n */\n\nexport function parseCacheControl(cacheControl: string): any {\n  // Taken from [Wreck](https://github.com/hapijs/wreck)\n  const re =\n    /(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g;\n\n  const header = {};\n  cacheControl.replace(re, ($0, $1, $2, $3) => {\n    const value = $2 || $3;\n    header[$1] = value ? value.toLowerCase() : true;\n    return \"\";\n  });\n\n  if (header[\"max-age\"]) {\n    const maxAge = parseInt(header[\"max-age\"], 10);\n    if (isNaN(maxAge)) delete header[\"max-age\"];\n    else header[\"max-age\"] = maxAge;\n  }\n\n  return header;\n}\n\nlet _isSafari = null;\n\n/**\n * Returns true when run in WebKit derived browsers.\n * This is used as a workaround for a memory leak in Safari caused by using Transferable objects to\n * transfer data between WebWorkers and the main thread.\n * https://github.com/mapbox/mapbox-gl-js/issues/8771\n *\n * This should be removed once the underlying Safari issue is fixed.\n *\n * @private\n * @param scope {WindowOrWorkerGlobalScope} Since this function is used both on the main thread and WebWorker context,\n *      let the calling scope pass in the global scope object.\n * @returns {boolean}\n */\nexport function isSafari(scope: any): boolean {\n  if (_isSafari == null) {\n    const userAgent = scope.navigator ? scope.navigator.userAgent : null;\n    _isSafari =\n      !!scope.safari ||\n      !!(\n        userAgent &&\n        (/\\b(iPad|iPhone|iPod)\\b/.test(userAgent) ||\n          (!!userAgent.match(\"Safari\") && !userAgent.match(\"Chrome\")))\n      );\n  }\n  return _isSafari;\n}\n\nexport function storageAvailable(type: string): boolean {\n  try {\n    const storage = window[type];\n    storage.setItem(\"_mapbox_test_\", 1);\n    storage.removeItem(\"_mapbox_test_\");\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n// The following methods are from https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\n//Unicode compliant base64 encoder for strings\nexport function b64EncodeUnicode(str: string) {\n  return btoa(\n    encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n      return String.fromCharCode(Number(\"0x\" + p1)); //eslint-disable-line\n    })\n  );\n}\n\n// Unicode compliant decoder for base64-encoded strings\nexport function b64DecodeUnicode(str: string) {\n  return decodeURIComponent(\n    atob(str)\n      .split(\"\")\n      .map((c) => {\n        return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2); //eslint-disable-line\n      })\n      .join(\"\")\n  );\n}\n\nexport function isImageBitmap(image: any): image is ImageBitmap {\n  return typeof ImageBitmap !== \"undefined\" && image instanceof ImageBitmap;\n}\n","// import { DOM, bindAll } from \"./dom\";\nimport DOM from \"./maplibre-borrow/src/util/dom\";\nimport { bindAll } from \"./maplibre-borrow/src/util/util\";\n\nimport { Map } from \"./map\";\nimport type { IControl } from \"maplibre-gl\";\n\n/**\n * An `TerrainControl` control adds a button to turn terrain on and off.\n *\n * @implements {IControl}\n * @param {Object} [options]\n * @param {string} [options.id] The ID of the raster-dem source to use.\n * @param {Object} [options.options]\n * @param {number} [options.options.exaggeration]\n * @example\n * var map = new maplibregl.Map({TerrainControl: false})\n *     .addControl(new maplibregl.TerrainControl({\n *         source: \"terrain\"\n *     }));\n */\nexport class TerrainControl implements IControl {\n  _map: Map;\n  _container: HTMLElement;\n  _terrainButton: HTMLButtonElement;\n\n  constructor() {\n    bindAll([\"_toggleTerrain\", \"_updateTerrainIcon\"], this);\n  }\n\n  onAdd(map: Map) {\n    this._map = map;\n    this._container = DOM.create(\n      \"div\",\n      \"maplibregl-ctrl maplibregl-ctrl-group\"\n    );\n    this._terrainButton = DOM.create(\n      \"button\",\n      \"maplibregl-ctrl-terrain\",\n      this._container\n    );\n    DOM.create(\n      \"span\",\n      \"maplibregl-ctrl-icon\",\n      this._terrainButton\n    ).setAttribute(\"aria-hidden\", \"true\");\n    this._terrainButton.type = \"button\";\n    this._terrainButton.addEventListener(\"click\", this._toggleTerrain);\n\n    this._updateTerrainIcon();\n    this._map.on(\"terrain\", this._updateTerrainIcon);\n    return this._container;\n  }\n\n  onRemove() {\n    DOM.remove(this._container);\n    this._map.off(\"terrain\", this._updateTerrainIcon);\n    this._map = undefined;\n  }\n\n  _toggleTerrain() {\n    // if (this._map.getTerrain()) {\n    //     this._map.setTerrain(null);\n    // } else {\n    //     this._map.setTerrain(this.options);\n    // }\n\n    if (this._map.hasTerrain()) {\n      this._map.disableTerrain();\n    } else {\n      this._map.enableTerrain();\n    }\n\n    this._updateTerrainIcon();\n  }\n\n  _updateTerrainIcon() {\n    this._terrainButton.classList.remove(\"maplibregl-ctrl-terrain\");\n    this._terrainButton.classList.remove(\"maplibregl-ctrl-terrain-enabled\");\n    // if (this._map.terrain) {\n    if (this._map.hasTerrain()) {\n      this._terrainButton.classList.add(\"maplibregl-ctrl-terrain-enabled\");\n      this._terrainButton.title = this._map._getUIString(\n        \"TerrainControl.disableTerrain\"\n      );\n    } else {\n      this._terrainButton.classList.add(\"maplibregl-ctrl-terrain\");\n      this._terrainButton.title = this._map._getUIString(\n        \"TerrainControl.enableTerrain\"\n      );\n    }\n  }\n}\n","// @ts-nocheck\nimport DOM from \"../../util/dom\";\nimport type Point from \"@mapbox/point-geometry\";\n\nconst LEFT_BUTTON = 0;\nconst RIGHT_BUTTON = 2;\n\n// the values for each button in MouseEvent.buttons\nconst BUTTONS_FLAGS = {\n  [LEFT_BUTTON]: 1,\n  [RIGHT_BUTTON]: 2,\n};\n\nfunction buttonStillPressed(e: MouseEvent, button: number) {\n  const flag = BUTTONS_FLAGS[button];\n  return e.buttons === undefined || (e.buttons & flag) !== flag;\n}\n\nclass MouseHandler {\n  _enabled: boolean;\n  _active: boolean;\n  _lastPoint: Point;\n  _eventButton: number;\n  _moved: boolean;\n  _clickTolerance: number;\n\n  constructor(options: { clickTolerance: number }) {\n    this.reset();\n    this._clickTolerance = options.clickTolerance || 1;\n  }\n\n  reset() {\n    this._active = false;\n    this._moved = false;\n    delete this._lastPoint;\n    delete this._eventButton;\n  }\n\n  _correctButton(e: MouseEvent, button: number) {\n    //eslint-disable-line\n    return false; // implemented by child\n  }\n\n  _move(lastPoint: Point, point: Point) {\n    //eslint-disable-line\n    return {}; // implemented by child\n  }\n\n  mousedown(e: MouseEvent, point: Point) {\n    if (this._lastPoint) return;\n\n    const eventButton = DOM.mouseButton(e);\n    if (!this._correctButton(e, eventButton)) return;\n\n    this._lastPoint = point;\n    this._eventButton = eventButton;\n  }\n\n  mousemoveWindow(e: MouseEvent, point: Point) {\n    const lastPoint = this._lastPoint;\n    if (!lastPoint) return;\n    e.preventDefault();\n\n    if (buttonStillPressed(e, this._eventButton)) {\n      // Some browsers don't fire a `mouseup` when the mouseup occurs outside\n      // the window or iframe:\n      // https://github.com/mapbox/mapbox-gl-js/issues/4622\n      //\n      // If the button is no longer pressed during this `mousemove` it may have\n      // been released outside of the window or iframe.\n      this.reset();\n      return;\n    }\n\n    if (!this._moved && point.dist(lastPoint) < this._clickTolerance) return;\n    this._moved = true;\n    this._lastPoint = point;\n\n    // implemented by child class\n    return this._move(lastPoint, point);\n  }\n\n  mouseupWindow(e: MouseEvent) {\n    if (!this._lastPoint) return;\n    const eventButton = DOM.mouseButton(e);\n    if (eventButton !== this._eventButton) return;\n    if (this._moved) DOM.suppressClick();\n    this.reset();\n  }\n\n  enable() {\n    this._enabled = true;\n  }\n\n  disable() {\n    this._enabled = false;\n    this.reset();\n  }\n\n  isEnabled() {\n    return this._enabled;\n  }\n\n  isActive() {\n    return this._active;\n  }\n}\n\nexport class MousePanHandler extends MouseHandler {\n  mousedown(e: MouseEvent, point: Point) {\n    super.mousedown(e, point);\n    if (this._lastPoint) this._active = true;\n  }\n  _correctButton(e: MouseEvent, button: number) {\n    return button === LEFT_BUTTON && !e.ctrlKey;\n  }\n\n  _move(lastPoint: Point, point: Point) {\n    return {\n      around: point,\n      panDelta: point.sub(lastPoint),\n    };\n  }\n}\n\nexport class MouseRotateHandler extends MouseHandler {\n  _correctButton(e: MouseEvent, button: number) {\n    return (button === LEFT_BUTTON && e.ctrlKey) || button === RIGHT_BUTTON;\n  }\n\n  _move(lastPoint: Point, point: Point) {\n    const degreesPerPixelMoved = 0.8;\n    const bearingDelta = (point.x - lastPoint.x) * degreesPerPixelMoved;\n    if (bearingDelta) {\n      this._active = true;\n      return { bearingDelta };\n    }\n  }\n\n  contextmenu(e: MouseEvent) {\n    // prevent browser context menu when necessary; we don't allow it with rotation\n    // because we can't discern rotation gesture start from contextmenu on Mac\n    e.preventDefault();\n  }\n}\n\nexport class MousePitchHandler extends MouseHandler {\n  _correctButton(e: MouseEvent, button: number) {\n    return (button === LEFT_BUTTON && e.ctrlKey) || button === RIGHT_BUTTON;\n  }\n\n  _move(lastPoint: Point, point: Point) {\n    const degreesPerPixelMoved = -0.5;\n    const pitchDelta = (point.y - lastPoint.y) * degreesPerPixelMoved;\n    if (pitchDelta) {\n      this._active = true;\n      return { pitchDelta };\n    }\n  }\n\n  contextmenu(e: MouseEvent) {\n    // prevent browser context menu when necessary; we don't allow it with rotation\n    // because we can't discern rotation gesture start from contextmenu on Mac\n    e.preventDefault();\n  }\n}\n","import Point from \"@mapbox/point-geometry\";\n\nimport DOM from \"./maplibre-borrow/src/util/dom\";\nimport { extend, bindAll } from \"./maplibre-borrow/src/util/util\";\n\nimport {\n  MouseRotateHandler,\n  MousePitchHandler,\n} from \"./maplibre-borrow/src/ui/handler/mouse\";\n\nimport { Map } from \"./map\";\nimport type { IControl } from \"maplibre-gl\";\n\ntype NavigationOptions = {\n  showCompass?: boolean;\n  showZoom?: boolean;\n  visualizePitch?: boolean;\n};\n\nconst defaultOptions: NavigationOptions = {\n  showCompass: true,\n  showZoom: true,\n  visualizePitch: false,\n};\n\n/**\n * A `NavigationControl` control contains zoom buttons and a compass.\n *\n * @implements {IControl}\n * @param {Object} [options]\n * @param {Boolean} [options.showCompass=true] If `true` the compass button is included.\n * @param {Boolean} [options.showZoom=true] If `true` the zoom-in and zoom-out buttons are included.\n * @param {Boolean} [options.visualizePitch=false] If `true` the pitch is visualized by rotating X-axis of compass.\n * @example\n * var nav = new maplibregl.NavigationControl();\n * map.addControl(nav, 'top-left');\n * @see [Display map navigation controls](https://maplibre.org/maplibre-gl-js-docs/example/navigation/)\n * @see [Add a third party vector tile source](https://maplibre.org/maplibre-gl-js-docs/example/third-party/)\n */\nexport class MaptilerNavigationControl implements IControl {\n  _map: Map;\n  options: NavigationOptions;\n  _container: HTMLElement;\n  _zoomInButton: HTMLButtonElement;\n  _zoomOutButton: HTMLButtonElement;\n  _compass: HTMLButtonElement;\n  _compassIcon: HTMLElement;\n  _handler: MouseRotateWrapper;\n\n  constructor(options: NavigationOptions) {\n    this.options = extend({}, defaultOptions, options);\n\n    this._container = DOM.create(\n      \"div\",\n      \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"\n    );\n    this._container.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n\n    if (this.options.showZoom) {\n      bindAll([\"_setButtonTitle\", \"_updateZoomButtons\"], this);\n      this._zoomInButton = this._createButton(\n        \"maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in\",\n        (e) => this._map.zoomIn({}, { originalEvent: e })\n      );\n      DOM.create(\n        \"span\",\n        \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\",\n        this._zoomInButton\n      ).setAttribute(\"aria-hidden\", \"true\");\n      this._zoomOutButton = this._createButton(\n        \"maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out\",\n        (e) => this._map.zoomOut({}, { originalEvent: e })\n      );\n      DOM.create(\n        \"span\",\n        \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\",\n        this._zoomOutButton\n      ).setAttribute(\"aria-hidden\", \"true\");\n    }\n    if (this.options.showCompass) {\n      bindAll([\"_rotateCompassArrow\"], this);\n      this._compass = this._createButton(\n        \"maplibregl-ctrl-compass mapboxgl-ctrl-compass\",\n        (e) => {\n          const currentPitch = this._map.getPitch();\n          if (currentPitch === 0) {\n            this._map.easeTo({ pitch: this._map.getMaxPitch() });\n          } else {\n            if (this.options.visualizePitch) {\n              this._map.resetNorthPitch({}, { originalEvent: e });\n            } else {\n              this._map.resetNorth({}, { originalEvent: e });\n            }\n          }\n        }\n      );\n\n      this._compassIcon = DOM.create(\n        \"span\",\n        \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\",\n        this._compass\n      );\n      this._compassIcon.setAttribute(\"aria-hidden\", \"true\");\n    }\n  }\n\n  _updateZoomButtons() {\n    const zoom = this._map.getZoom();\n    const isMax = zoom === this._map.getMaxZoom();\n    const isMin = zoom === this._map.getMinZoom();\n    this._zoomInButton.disabled = isMax;\n    this._zoomOutButton.disabled = isMin;\n    this._zoomInButton.setAttribute(\"aria-disabled\", isMax.toString());\n    this._zoomOutButton.setAttribute(\"aria-disabled\", isMin.toString());\n  }\n\n  _rotateCompassArrow() {\n    const rotate = this.options.visualizePitch\n      ? `scale(${Math.min(\n          1.5,\n          1 /\n            Math.pow(Math.cos(this._map.transform.pitch * (Math.PI / 180)), 0.5)\n        )}) rotateX(${Math.min(70, this._map.transform.pitch)}deg) rotateZ(${\n          this._map.transform.angle * (180 / Math.PI)\n        }deg)`\n      : `rotate(${this._map.transform.angle * (180 / Math.PI)}deg)`;\n\n    this._compassIcon.style.transform = rotate;\n  }\n\n  onAdd(map: Map) {\n    this._map = map;\n    if (this.options.showZoom) {\n      this._setButtonTitle(this._zoomInButton, \"ZoomIn\");\n      this._setButtonTitle(this._zoomOutButton, \"ZoomOut\");\n      this._map.on(\"zoom\", this._updateZoomButtons);\n      this._updateZoomButtons();\n    }\n    if (this.options.showCompass) {\n      this._setButtonTitle(this._compass, \"ResetBearing\");\n      if (this.options.visualizePitch) {\n        this._map.on(\"pitch\", this._rotateCompassArrow);\n      }\n      this._map.on(\"rotate\", this._rotateCompassArrow);\n      this._rotateCompassArrow();\n      this._handler = new MouseRotateWrapper(\n        this._map,\n        this._compass,\n        this.options.visualizePitch\n      );\n    }\n    return this._container;\n  }\n\n  onRemove() {\n    DOM.remove(this._container);\n    if (this.options.showZoom) {\n      this._map.off(\"zoom\", this._updateZoomButtons);\n    }\n    if (this.options.showCompass) {\n      if (this.options.visualizePitch) {\n        this._map.off(\"pitch\", this._rotateCompassArrow);\n      }\n      this._map.off(\"rotate\", this._rotateCompassArrow);\n      this._handler.off();\n      delete this._handler;\n    }\n\n    delete this._map;\n  }\n\n  _createButton(className: string, fn: (e?: any) => unknown) {\n    const a = DOM.create(\n      \"button\",\n      className,\n      this._container\n    ) as HTMLButtonElement;\n    a.type = \"button\";\n    a.addEventListener(\"click\", fn);\n    return a;\n  }\n\n  _setButtonTitle(button: HTMLButtonElement, title: string) {\n    const str = this._map._getUIString(`NavigationControl.${title}`);\n    button.title = str;\n    button.setAttribute(\"aria-label\", str);\n  }\n}\n\nclass MouseRotateWrapper {\n  map: Map;\n  _clickTolerance: number;\n  element: HTMLElement;\n  mouseRotate: MouseRotateHandler;\n  mousePitch: MousePitchHandler;\n  _startPos: Point;\n  _lastPos: Point;\n\n  constructor(map: Map, element: HTMLElement, pitch = false) {\n    this._clickTolerance = 10;\n    this.element = element;\n    this.mouseRotate = new MouseRotateHandler({\n      clickTolerance: map.dragRotate._mouseRotate._clickTolerance,\n    });\n    this.map = map;\n    if (pitch)\n      this.mousePitch = new MousePitchHandler({\n        clickTolerance: map.dragRotate._mousePitch._clickTolerance,\n      });\n\n    bindAll(\n      [\n        \"mousedown\",\n        \"mousemove\",\n        \"mouseup\",\n        \"touchstart\",\n        \"touchmove\",\n        \"touchend\",\n        \"reset\",\n      ],\n      this\n    );\n    DOM.addEventListener(element, \"mousedown\", this.mousedown);\n    DOM.addEventListener(element, \"touchstart\", this.touchstart, {\n      passive: false,\n    });\n    DOM.addEventListener(element, \"touchmove\", this.touchmove);\n    DOM.addEventListener(element, \"touchend\", this.touchend);\n    DOM.addEventListener(element, \"touchcancel\", this.reset);\n  }\n\n  down(e: MouseEvent, point: Point) {\n    this.mouseRotate.mousedown(e, point);\n    if (this.mousePitch) this.mousePitch.mousedown(e, point);\n    DOM.disableDrag();\n  }\n\n  move(e: MouseEvent, point: Point) {\n    const map = this.map;\n    const r = this.mouseRotate.mousemoveWindow(e, point) as any;\n    if (r && r.bearingDelta) map.setBearing(map.getBearing() + r.bearingDelta);\n    if (this.mousePitch) {\n      const p = this.mousePitch.mousemoveWindow(e, point) as any;\n      if (p && p.pitchDelta) map.setPitch(map.getPitch() + p.pitchDelta);\n    }\n  }\n\n  off() {\n    const element = this.element;\n    DOM.removeEventListener(element, \"mousedown\", this.mousedown);\n    DOM.removeEventListener(element, \"touchstart\", this.touchstart, {\n      passive: false,\n    });\n    DOM.removeEventListener(element, \"touchmove\", this.touchmove);\n    DOM.removeEventListener(element, \"touchend\", this.touchend);\n    DOM.removeEventListener(element, \"touchcancel\", this.reset);\n    this.offTemp();\n  }\n\n  offTemp() {\n    DOM.enableDrag();\n    DOM.removeEventListener(window, \"mousemove\", this.mousemove);\n    DOM.removeEventListener(window, \"mouseup\", this.mouseup);\n  }\n\n  mousedown(e: MouseEvent) {\n    this.down(\n      extend({}, e, {\n        ctrlKey: true,\n        preventDefault: () => e.preventDefault(),\n      }),\n      DOM.mousePos(this.element, e)\n    );\n    DOM.addEventListener(window, \"mousemove\", this.mousemove);\n    DOM.addEventListener(window, \"mouseup\", this.mouseup);\n  }\n\n  mousemove(e: MouseEvent) {\n    this.move(e, DOM.mousePos(this.element, e));\n  }\n\n  mouseup(e: MouseEvent) {\n    this.mouseRotate.mouseupWindow(e);\n    if (this.mousePitch) this.mousePitch.mouseupWindow(e);\n    this.offTemp();\n  }\n\n  touchstart(e: TouchEvent) {\n    if (e.targetTouches.length !== 1) {\n      this.reset();\n    } else {\n      this._startPos = this._lastPos = DOM.touchPos(\n        this.element,\n        e.targetTouches\n      )[0];\n      this.down(\n        {\n          type: \"mousedown\",\n          button: 0,\n          ctrlKey: true,\n          preventDefault: () => e.preventDefault(),\n        } as any as MouseEvent,\n        this._startPos\n      );\n    }\n  }\n\n  touchmove(e: TouchEvent) {\n    if (e.targetTouches.length !== 1) {\n      this.reset();\n    } else {\n      this._lastPos = DOM.touchPos(this.element, e.targetTouches)[0];\n      this.move(\n        { preventDefault: () => e.preventDefault() } as any as MouseEvent,\n        this._lastPos\n      );\n    }\n  }\n\n  touchend(e: TouchEvent) {\n    if (\n      e.targetTouches.length === 0 &&\n      this._startPos &&\n      this._lastPos &&\n      this._startPos.dist(this._lastPos) < this._clickTolerance\n    ) {\n      this.element.click();\n    }\n    this.reset();\n  }\n\n  reset() {\n    this.mouseRotate.reset();\n    if (this.mousePitch) this.mousePitch.reset();\n    delete this._startPos;\n    delete this._lastPos;\n    this.offTemp();\n  }\n}\n","import * as maplibre from \"maplibre-gl\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { config } from \"./config\";\nimport { defaults } from \"./defaults\";\nimport { CustomLogoControl } from \"./CustomLogoControl\";\nimport { enableRTL } from \"./tools\";\nimport { getBrowserLanguage, Language, LanguageString } from \"./language\";\nimport {\n  MapStyleVariant,\n  ReferenceMapStyle,\n  styleToStyle,\n} from \"./mapstyle/mapstyle\";\nimport { FullscreenControl, GeolocateControl, ScaleControl } from \"maplibre-gl\";\nimport { TerrainControl } from \"./terraincontrol\";\nimport { MaptilerNavigationControl } from \"./MaptilerNavigationControl\";\n\n// StyleSwapOptions is not exported by Maplibre, but we can redefine it (used for setStyle)\nexport type TransformStyleFunction = (\n  previous: maplibre.StyleSpecification,\n  next: maplibre.StyleSpecification\n) => maplibre.StyleSpecification;\n\nexport type StyleSwapOptions = {\n  diff?: boolean;\n  transformStyle?: TransformStyleFunction;\n};\n\nconst MAPTILER_SESSION_ID = uuidv4();\n\n/**\n * Options to provide to the `Map` constructor\n */\nexport type MapOptions = Omit<maplibre.MapOptions, \"style\" | \"maplibreLogo\"> & {\n  /**\n   * Style of the map. Can be:\n   * - a full style URL (possibly with API key)\n   * - a shorthand with only the MapTIler style name (eg. `\"streets-v2\"`)\n   * - a longer form with the prefix `\"maptiler://\"` (eg. `\"maptiler://streets-v2\"`)\n   */\n  style?: ReferenceMapStyle | MapStyleVariant | string;\n\n  /**\n   * Shows the MapTiler logo if `true`. Note that the logo is always displayed on free plan.\n   */\n  maptilerLogo?: boolean;\n\n  /**\n   * Enables 3D terrain if `true`. (default: `false`)\n   */\n  terrain?: boolean;\n\n  /**\n   * Exaggeration factor of the terrain. (default: `1`, no exaggeration)\n   */\n  terrainExaggeration?: number;\n\n  /**\n   * Show the navigation control. (default: `true`, will hide if `false`)\n   */\n  navigationControl?: boolean | maplibre.ControlPosition;\n\n  /**\n   * Show the terrain control. (default: `true`, will hide if `false`)\n   */\n  terrainControl?: boolean | maplibre.ControlPosition;\n\n  /**\n   * Show the scale control. (default: `false`, will show if `true`)\n   */\n  scaleControl?: boolean | maplibre.ControlPosition;\n\n  /**\n   * Show the full screen control. (default: `false`, will show if `true`)\n   */\n  fullscreenControl?: boolean | maplibre.ControlPosition;\n};\n\n/**\n * The Map class can be instanciated to display a map in a `<div>`\n */\nexport class Map extends maplibre.Map {\n  private languageShouldUpdate = false;\n  private isStyleInitialized = false;\n  private isTerrainEnabled = false;\n  private terrainExaggeration = 1;\n\n  constructor(options: MapOptions) {\n    const style = styleToStyle(options.style);\n\n    // calling the map constructor with full length style\n    super({\n      ...options,\n      style,\n      maplibreLogo: false,\n\n      transformRequest: (url: string) => {\n        const reqUrl = new URL(url);\n        \n        if (reqUrl.host === defaults.maptilerApiHost) {\n          if (!reqUrl.searchParams.has(\"key\")) {\n            reqUrl.searchParams.append(\"key\", config.apiKey);\n          }\n  \n          reqUrl.searchParams.append(\"mtsid\", MAPTILER_SESSION_ID);\n        }\n\n        return {\n          url: reqUrl.href,\n          headers: {},\n        };\n      },\n    });\n\n    // Check if language has been modified and. If so, it will be updated during the next lifecycle step\n    this.on(\"styledataloading\", () => {\n      this.languageShouldUpdate =\n        !!config.primaryLanguage || !!config.secondaryLanguage;\n    });\n\n    // If the config includes language changing, we must update the map language\n    this.on(\"styledata\", () => {\n      if (\n        config.primaryLanguage &&\n        (this.languageShouldUpdate || !this.isStyleInitialized)\n      ) {\n        this.setPrimaryLanguage(config.primaryLanguage);\n      }\n\n      if (\n        config.secondaryLanguage &&\n        (this.languageShouldUpdate || !this.isStyleInitialized)\n      ) {\n        this.setSecondaryLanguage(config.secondaryLanguage);\n      }\n\n      this.languageShouldUpdate = false;\n      this.isStyleInitialized = true;\n    });\n\n    // this even is in charge of reaplying the terrain elevation after the\n    // style has changed because depending on the src/tgt style,\n    // the style logic is not always able to resolve the application of terrain\n    this.on(\"styledata\", () => {\n      // the styling resolver did no manage to reaply the terrain,\n      // so let's reload it\n      if (this.getTerrain() === null && this.isTerrainEnabled) {\n        this.enableTerrain(this.terrainExaggeration);\n      }\n    });\n\n    // load the Right-to-Left text plugin (will happen only once)\n    this.once(\"load\", async () => {\n      enableRTL();\n    });\n\n    // Update logo and attibution\n    this.once(\"load\", async () => {\n      let tileJsonContent = { logo: null };\n\n      try {\n        const possibleSources = Object.keys(this.style.sourceCaches)\n          .map((sourceName) => this.getSource(sourceName))\n          .filter(\n            (s: any) =>\n              typeof s.url === \"string\" && s.url.includes(\"tiles.json\")\n          );\n\n        const styleUrl = new URL(\n          (possibleSources[0] as maplibre.VectorTileSource).url\n        );\n\n        if (!styleUrl.searchParams.has(\"key\")) {\n          styleUrl.searchParams.append(\"key\", config.apiKey);\n        }\n\n        const tileJsonRes = await fetch(styleUrl.href);\n        tileJsonContent = await tileJsonRes.json();\n      } catch (e) {\n        // No tiles.json found (should not happen on maintained styles)\n      }\n\n      // The attribution and logo must show when required\n      if (\"logo\" in tileJsonContent && tileJsonContent.logo) {\n        const logoURL: string = tileJsonContent.logo;\n\n        this.addControl(\n          new CustomLogoControl({ logoURL }),\n          options.logoPosition\n        );\n\n        // if attribution in option is `false` but the the logo shows up in the tileJson, then the attribution must show anyways\n        if (options.attributionControl === false) {\n          this.addControl(new maplibre.AttributionControl(options));\n        }\n      } else if (options.maptilerLogo) {\n        this.addControl(new CustomLogoControl(), options.logoPosition);\n      }\n\n      // the other controls at init time but be after\n      // (due to the async nature of logo control)\n\n      // By default, no scale control\n      if (options.scaleControl) {\n        // default position, if not provided, is top left corner\n        const position = (\n          options.scaleControl === true || options.scaleControl === undefined\n            ? \"bottom-right\"\n            : options.scaleControl\n        ) as maplibre.ControlPosition;\n\n        const scaleControl = new ScaleControl({ unit: config.unit });\n        this.addControl(scaleControl, position);\n        config.on(\"unit\", (unit) => {\n          scaleControl.setUnit(unit);\n        });\n      }\n\n      if (options.navigationControl !== false) {\n        // default position, if not provided, is top left corner\n        const position = (\n          options.navigationControl === true ||\n          options.navigationControl === undefined\n            ? \"top-right\"\n            : options.navigationControl\n        ) as maplibre.ControlPosition;\n        this.addControl(\n          new MaptilerNavigationControl({\n            showCompass: true,\n            showZoom: true,\n            visualizePitch: true,\n          }),\n          position\n        );\n\n        this.addControl(new GeolocateControl({}), position);\n      }\n\n      if (options.terrainControl !== false) {\n        // default position, if not provided, is top left corner\n        const position = (\n          options.terrainControl === true ||\n          options.terrainControl === undefined\n            ? \"top-right\"\n            : options.terrainControl\n        ) as maplibre.ControlPosition;\n        this.addControl(new TerrainControl(), position);\n      }\n\n      // By default, no fullscreen control\n      if (options.fullscreenControl) {\n        // default position, if not provided, is top left corner\n        const position = (\n          options.fullscreenControl === true ||\n          options.fullscreenControl === undefined\n            ? \"top-right\"\n            : options.fullscreenControl\n        ) as maplibre.ControlPosition;\n\n        this.addControl(new FullscreenControl({}), position);\n      }\n    });\n\n    // enable 3D terrain if provided in options\n    if (options.terrain) {\n      this.enableTerrain(\n        options.terrainExaggeration ?? this.terrainExaggeration\n      );\n    }\n  }\n\n  /**\n   * Update the style of the map.\n   * Can be:\n   * - a full style URL (possibly with API key)\n   * - a shorthand with only the MapTIler style name (eg. `\"streets-v2\"`)\n   * - a longer form with the prefix `\"maptiler://\"` (eg. `\"maptiler://streets-v2\"`)\n   * @param style\n   * @param options\n   * @returns\n   */\n  setStyle(\n    style: maplibre.StyleSpecification | string | null,\n    options?: StyleSwapOptions & maplibre.StyleOptions\n  ) {\n    return super.setStyle(styleToStyle(style), options);\n  }\n\n  /**\n   * Define the primary language of the map. Note that not all the languages shorthands provided are available.\n   * This function is a short for `.setPrimaryLanguage()`\n   * @param language\n   */\n  setLanguage(language: LanguageString = defaults.primaryLanguage) {\n    if (language === Language.AUTO) {\n      return this.setLanguage(getBrowserLanguage());\n    }\n    this.setPrimaryLanguage(language);\n  }\n\n  /**\n   * Define the primary language of the map. Note that not all the languages shorthands provided are available.\n   * @param language\n   */\n  setPrimaryLanguage(language: LanguageString = defaults.primaryLanguage) {\n    if (language === Language.AUTO) {\n      return this.setPrimaryLanguage(getBrowserLanguage());\n    }\n\n    // We want to keep track of it to apply the language again when changing the style\n    config.primaryLanguage = language;\n\n    const layers = this.getStyle().layers;\n\n    // detects pattern like \"{name:somelanguage}\" with loose spacing\n    const strLanguageRegex = /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n    // detects pattern like \"name:somelanguage\" with loose spacing\n    const strLanguageInArrayRegex = /^\\s*name\\s*(:\\s*(\\S*))?\\s*$/;\n\n    // for string based bilingual lang such as \"{name:latin}  {name:nonlatin}\" or \"{name:latin}  {name}\"\n    const strBilingualRegex =\n      /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}(\\s*){\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n    // Regex to capture when there are more info, such as mountains elevation with unit m/ft\n    const strMoreInfoRegex = /^(.*)({\\s*name\\s*(:\\s*(\\S*))?\\s*})(.*)$/;\n\n    const langStr = language ? `name:${language}` : \"name\"; // to handle local lang\n    const replacer = [\n      \"case\",\n      [\"has\", langStr],\n      [\"get\", langStr],\n      [\"get\", \"name:latin\"],\n    ];\n\n    for (let i = 0; i < layers.length; i += 1) {\n      const layer = layers[i];\n      const layout = layer.layout;\n\n      if (!layout) {\n        continue;\n      }\n\n      if (!layout[\"text-field\"]) {\n        continue;\n      }\n\n      const textFieldLayoutProp = this.getLayoutProperty(\n        layer.id,\n        \"text-field\"\n      );\n\n      // Note:\n      // The value of the 'text-field' property can take multiple shape;\n      // 1. can be an array with 'concat' on its first element (most likely means bilingual)\n      // 2. can be an array with 'get' on its first element (monolingual)\n      // 3. can be a string of shape '{name:latin}'\n      // 4. can be a string referencing another prop such as '{housenumber}' or '{ref}'\n      //\n      // The case 1, 2 and 3 will be updated while maintaining their original type and shape.\n      // The case 3 will not be updated\n\n      let regexMatch;\n\n      // This is case 1\n      if (\n        Array.isArray(textFieldLayoutProp) &&\n        textFieldLayoutProp.length >= 2 &&\n        textFieldLayoutProp[0].trim().toLowerCase() === \"concat\"\n      ) {\n        const newProp = textFieldLayoutProp.slice(); // newProp is Array\n        // The style could possibly have defined more than 2 concatenated language strings but we only want to edit the first\n        // The style could also define that there are more things being concatenated and not only languages\n\n        for (let j = 0; j < textFieldLayoutProp.length; j += 1) {\n          const elem = textFieldLayoutProp[j];\n\n          // we are looking for an elem of shape '{name:somelangage}' (string) of `[\"get\", \"name:somelanguage\"]` (array)\n\n          // the entry of of shape '{name:somelangage}', possibly with loose spacing\n          if (\n            (typeof elem === \"string\" || elem instanceof String) &&\n            strLanguageRegex.exec(elem.toString())\n          ) {\n            newProp[j] = replacer;\n            break; // we just want to update the primary language\n          }\n          // the entry is of an array of shape `[\"get\", \"name:somelanguage\"]`\n          else if (\n            Array.isArray(elem) &&\n            elem.length >= 2 &&\n            elem[0].trim().toLowerCase() === \"get\" &&\n            strLanguageInArrayRegex.exec(elem[1].toString())\n          ) {\n            newProp[j] = replacer;\n            break; // we just want to update the primary language\n          } else if (\n            Array.isArray(elem) &&\n            elem.length === 4 &&\n            elem[0].trim().toLowerCase() === \"case\"\n          ) {\n            newProp[j] = replacer;\n            break; // we just want to update the primary language\n          }\n        }\n\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      }\n\n      // This is case 2\n      else if (\n        Array.isArray(textFieldLayoutProp) &&\n        textFieldLayoutProp.length >= 2 &&\n        textFieldLayoutProp[0].trim().toLowerCase() === \"get\" &&\n        strLanguageInArrayRegex.exec(textFieldLayoutProp[1].toString())\n      ) {\n        const newProp = replacer;\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      }\n\n      // This is case 3\n      else if (\n        (typeof textFieldLayoutProp === \"string\" ||\n          textFieldLayoutProp instanceof String) &&\n        strLanguageRegex.exec(textFieldLayoutProp.toString())\n      ) {\n        const newProp = replacer;\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      } else if (\n        Array.isArray(textFieldLayoutProp) &&\n        textFieldLayoutProp.length === 4 &&\n        textFieldLayoutProp[0].trim().toLowerCase() === \"case\"\n      ) {\n        const newProp = replacer;\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      } else if (\n        (typeof textFieldLayoutProp === \"string\" ||\n          textFieldLayoutProp instanceof String) &&\n        (regexMatch = strBilingualRegex.exec(\n          textFieldLayoutProp.toString()\n        )) !== null\n      ) {\n        const newProp = `{${langStr}}${regexMatch[3]}{name${\n          regexMatch[4] || \"\"\n        }}`;\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      } else if (\n        (typeof textFieldLayoutProp === \"string\" ||\n          textFieldLayoutProp instanceof String) &&\n        (regexMatch = strMoreInfoRegex.exec(textFieldLayoutProp.toString())) !==\n          null\n      ) {\n        const newProp = `${regexMatch[1]}{${langStr}}${regexMatch[5]}`;\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      }\n    }\n  }\n\n  /**\n   * Define the secondary language of the map.\n   * Note that most styles do not allow a secondary language and this function only works if the style allows (no force adding)\n   * @param language\n   */\n  setSecondaryLanguage(language: LanguageString = defaults.secondaryLanguage) {\n    if (language === Language.AUTO) {\n      return this.setSecondaryLanguage(getBrowserLanguage());\n    }\n\n    // We want to keep track of it to apply the language again when changing the style\n    config.secondaryLanguage = language;\n\n    const layers = this.getStyle().layers;\n\n    // detects pattern like \"{name:somelanguage}\" with loose spacing\n    const strLanguageRegex = /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n    // detects pattern like \"name:somelanguage\" with loose spacing\n    const strLanguageInArrayRegex = /^\\s*name\\s*(:\\s*(\\S*))?\\s*$/;\n\n    // for string based bilingual lang such as \"{name:latin}  {name:nonlatin}\" or \"{name:latin}  {name}\"\n    const strBilingualRegex =\n      /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}(\\s*){\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n    let regexMatch;\n\n    for (let i = 0; i < layers.length; i += 1) {\n      const layer = layers[i];\n      const layout = layer.layout;\n\n      if (!layout) {\n        continue;\n      }\n\n      if (!layout[\"text-field\"]) {\n        continue;\n      }\n\n      const textFieldLayoutProp = this.getLayoutProperty(\n        layer.id,\n        \"text-field\"\n      );\n\n      let newProp;\n\n      // Note:\n      // The value of the 'text-field' property can take multiple shape;\n      // 1. can be an array with 'concat' on its first element (most likely means bilingual)\n      // 2. can be an array with 'get' on its first element (monolingual)\n      // 3. can be a string of shape '{name:latin}'\n      // 4. can be a string referencing another prop such as '{housenumber}' or '{ref}'\n      //\n      // Only the case 1 will be updated because we don't want to change the styling (read: add a secondary language where the original styling is only displaying 1)\n\n      // This is case 1\n      if (\n        Array.isArray(textFieldLayoutProp) &&\n        textFieldLayoutProp.length >= 2 &&\n        textFieldLayoutProp[0].trim().toLowerCase() === \"concat\"\n      ) {\n        newProp = textFieldLayoutProp.slice(); // newProp is Array\n        // The style could possibly have defined more than 2 concatenated language strings but we only want to edit the first\n        // The style could also define that there are more things being concatenated and not only languages\n\n        let languagesAlreadyFound = 0;\n\n        for (let j = 0; j < textFieldLayoutProp.length; j += 1) {\n          const elem = textFieldLayoutProp[j];\n\n          // we are looking for an elem of shape '{name:somelangage}' (string) of `[\"get\", \"name:somelanguage\"]` (array)\n\n          // the entry of of shape '{name:somelangage}', possibly with loose spacing\n          if (\n            (typeof elem === \"string\" || elem instanceof String) &&\n            strLanguageRegex.exec(elem.toString())\n          ) {\n            if (languagesAlreadyFound === 1) {\n              newProp[j] = `{name:${language}}`;\n              break; // we just want to update the secondary language\n            }\n\n            languagesAlreadyFound += 1;\n          }\n          // the entry is of an array of shape `[\"get\", \"name:somelanguage\"]`\n          else if (\n            Array.isArray(elem) &&\n            elem.length >= 2 &&\n            elem[0].trim().toLowerCase() === \"get\" &&\n            strLanguageInArrayRegex.exec(elem[1].toString())\n          ) {\n            if (languagesAlreadyFound === 1) {\n              newProp[j][1] = `name:${language}`;\n              break; // we just want to update the secondary language\n            }\n\n            languagesAlreadyFound += 1;\n          } else if (\n            Array.isArray(elem) &&\n            elem.length === 4 &&\n            elem[0].trim().toLowerCase() === \"case\"\n          ) {\n            if (languagesAlreadyFound === 1) {\n              newProp[j] = [\"get\", `name:${language}`]; // the situation with 'case' is supposed to only happen with the primary lang\n              break; // but in case a styling also does that for secondary...\n            }\n\n            languagesAlreadyFound += 1;\n          }\n        }\n\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      }\n\n      // the language (both first and second) are defined into a single string model\n      else if (\n        (typeof textFieldLayoutProp === \"string\" ||\n          textFieldLayoutProp instanceof String) &&\n        (regexMatch = strBilingualRegex.exec(\n          textFieldLayoutProp.toString()\n        )) !== null\n      ) {\n        const langStr = language ? `name:${language}` : \"name\"; // to handle local lang\n        newProp = `{name${regexMatch[1] || \"\"}}${regexMatch[3]}{${langStr}}`;\n        this.setLayoutProperty(layer.id, \"text-field\", newProp);\n      }\n    }\n  }\n\n  /**\n   * Get the exaggeration factor applied to the terrain\n   * @returns\n   */\n  getTerrainExaggeration(): number {\n    return this.terrainExaggeration;\n  }\n\n  /**\n   * Know if terrian is enabled or not\n   * @returns\n   */\n  hasTerrain(): boolean {\n    return this.isTerrainEnabled;\n  }\n\n  /**\n   * Enables the 3D terrain visualization\n   * @param exaggeration\n   * @returns\n   */\n  enableTerrain(exaggeration = this.terrainExaggeration) {\n    const terrainInfo = this.getTerrain();\n\n    const addTerrain = () => {\n      // When style is changed,\n      this.isTerrainEnabled = true;\n      this.terrainExaggeration = exaggeration;\n\n      this.addSource(defaults.terrainSourceId, {\n        type: \"raster-dem\",\n        url: defaults.terrainSourceURL,\n      });\n      this.setTerrain({\n        source: defaults.terrainSourceId,\n        exaggeration: exaggeration,\n      });\n    };\n\n    // The terrain has already been loaded,\n    // we just update the exaggeration.\n    if (terrainInfo) {\n      this.setTerrain({ ...terrainInfo, exaggeration });\n      return;\n    }\n\n    if (this.loaded() || this.isTerrainEnabled) {\n      addTerrain();\n    } else {\n      this.once(\"load\", () => {\n        if (this.getTerrain() && this.getSource(defaults.terrainSourceId)) {\n          return;\n        }\n        addTerrain();\n      });\n    }\n  }\n\n  /**\n   * Disable the 3D terrain visualization\n   */\n  disableTerrain() {\n    this.isTerrainEnabled = false;\n    this.setTerrain(null);\n    if (this.getSource(defaults.terrainSourceId)) {\n      this.removeSource(defaults.terrainSourceId);\n    }\n  }\n\n  /**\n   * Sets the 3D terrain exageration factor.\n   * Note: this is only a shortcut to `.enableTerrain()`\n   * @param exaggeration\n   */\n  setTerrainExaggeration(exaggeration: number) {\n    this.enableTerrain(exaggeration);\n  }\n\n  // getLanguages() {\n  //   const layers = this.getStyle().layers;\n\n  //   for (let i = 0; i < layers.length; i += 1) {\n  //     const layer = layers[i];\n  //     const layout = layer.layout;\n\n  //     if (!layout) {\n  //       continue;\n  //     }\n\n  //     if (!layout[\"text-field\"]) {\n  //       continue;\n  //     }\n\n  //     const textFieldLayoutProp = this.getLayoutProperty(\n  //       layer.id,\n  //       \"text-field\"\n  //     );\n  //   }\n  // }\n}\n","// This comes from https://github.com/mapbox/point-geometry\n// but was newver made a ES module, yet is necesasry to expose\n// objects that are compliant with MapLibre\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n  this.x = x;\n  this.y = y;\n}\n\nPoint.prototype = {\n  /**\n   * Clone this point, returning a new point that can be modified\n   * without affecting the old one.\n   * @return {Point} the clone\n   */\n  clone: function () {\n    return new Point(this.x, this.y);\n  },\n\n  /**\n   * Add this point's x & y coordinates to another point,\n   * yielding a new point.\n   * @param {Point} p the other point\n   * @return {Point} output point\n   */\n  add: function (p) {\n    return this.clone()._add(p);\n  },\n\n  /**\n   * Subtract this point's x & y coordinates to from point,\n   * yielding a new point.\n   * @param {Point} p the other point\n   * @return {Point} output point\n   */\n  sub: function (p) {\n    return this.clone()._sub(p);\n  },\n\n  /**\n   * Multiply this point's x & y coordinates by point,\n   * yielding a new point.\n   * @param {Point} p the other point\n   * @return {Point} output point\n   */\n  multByPoint: function (p) {\n    return this.clone()._multByPoint(p);\n  },\n\n  /**\n   * Divide this point's x & y coordinates by point,\n   * yielding a new point.\n   * @param {Point} p the other point\n   * @return {Point} output point\n   */\n  divByPoint: function (p) {\n    return this.clone()._divByPoint(p);\n  },\n\n  /**\n   * Multiply this point's x & y coordinates by a factor,\n   * yielding a new point.\n   * @param {Number} k factor\n   * @return {Point} output point\n   */\n  mult: function (k) {\n    return this.clone()._mult(k);\n  },\n\n  /**\n   * Divide this point's x & y coordinates by a factor,\n   * yielding a new point.\n   * @param {Point} k factor\n   * @return {Point} output point\n   */\n  div: function (k) {\n    return this.clone()._div(k);\n  },\n\n  /**\n   * Rotate this point around the 0, 0 origin by an angle a,\n   * given in radians\n   * @param {Number} a angle to rotate around, in radians\n   * @return {Point} output point\n   */\n  rotate: function (a) {\n    return this.clone()._rotate(a);\n  },\n\n  /**\n   * Rotate this point around p point by an angle a,\n   * given in radians\n   * @param {Number} a angle to rotate around, in radians\n   * @param {Point} p Point to rotate around\n   * @return {Point} output point\n   */\n  rotateAround: function (a, p) {\n    return this.clone()._rotateAround(a, p);\n  },\n\n  /**\n   * Multiply this point by a 4x1 transformation matrix\n   * @param {Array<Number>} m transformation matrix\n   * @return {Point} output point\n   */\n  matMult: function (m) {\n    return this.clone()._matMult(m);\n  },\n\n  /**\n   * Calculate this point but as a unit vector from 0, 0, meaning\n   * that the distance from the resulting point to the 0, 0\n   * coordinate will be equal to 1 and the angle from the resulting\n   * point to the 0, 0 coordinate will be the same as before.\n   * @return {Point} unit vector point\n   */\n  unit: function () {\n    return this.clone()._unit();\n  },\n\n  /**\n   * Compute a perpendicular point, where the new y coordinate\n   * is the old x coordinate and the new x coordinate is the old y\n   * coordinate multiplied by -1\n   * @return {Point} perpendicular point\n   */\n  perp: function () {\n    return this.clone()._perp();\n  },\n\n  /**\n   * Return a version of this point with the x & y coordinates\n   * rounded to integers.\n   * @return {Point} rounded point\n   */\n  round: function () {\n    return this.clone()._round();\n  },\n\n  /**\n   * Return the magnitude of this point: this is the Euclidean\n   * distance from the 0, 0 coordinate to this point's x and y\n   * coordinates.\n   * @return {Number} magnitude\n   */\n  mag: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  },\n\n  /**\n   * Judge whether this point is equal to another point, returning\n   * true or false.\n   * @param {Point} other the other point\n   * @return {boolean} whether the points are equal\n   */\n  equals: function (other) {\n    return this.x === other.x && this.y === other.y;\n  },\n\n  /**\n   * Calculate the distance from this point to another point\n   * @param {Point} p the other point\n   * @return {Number} distance\n   */\n  dist: function (p) {\n    return Math.sqrt(this.distSqr(p));\n  },\n\n  /**\n   * Calculate the distance from this point to another point,\n   * without the square root step. Useful if you're comparing\n   * relative distances.\n   * @param {Point} p the other point\n   * @return {Number} distance\n   */\n  distSqr: function (p) {\n    const dx = p.x - this.x,\n      dy = p.y - this.y;\n    return dx * dx + dy * dy;\n  },\n\n  /**\n   * Get the angle from the 0, 0 coordinate to this point, in radians\n   * coordinates.\n   * @return {Number} angle\n   */\n  angle: function () {\n    return Math.atan2(this.y, this.x);\n  },\n\n  /**\n   * Get the angle from this point to another point, in radians\n   * @param {Point} b the other point\n   * @return {Number} angle\n   */\n  angleTo: function (b) {\n    return Math.atan2(this.y - b.y, this.x - b.x);\n  },\n\n  /**\n   * Get the angle between this point and another point, in radians\n   * @param {Point} b the other point\n   * @return {Number} angle\n   */\n  angleWith: function (b) {\n    return this.angleWithSep(b.x, b.y);\n  },\n\n  /*\n   * Find the angle of the two vectors, solving the formula for\n   * the cross product a x b = |a||b|sin(θ) for θ.\n   * @param {Number} x the x-coordinate\n   * @param {Number} y the y-coordinate\n   * @return {Number} the angle in radians\n   */\n  angleWithSep: function (x, y) {\n    return Math.atan2(this.x * y - this.y * x, this.x * x + this.y * y);\n  },\n\n  _matMult: function (m) {\n    const x = m[0] * this.x + m[1] * this.y,\n      y = m[2] * this.x + m[3] * this.y;\n    this.x = x;\n    this.y = y;\n    return this;\n  },\n\n  _add: function (p) {\n    this.x += p.x;\n    this.y += p.y;\n    return this;\n  },\n\n  _sub: function (p) {\n    this.x -= p.x;\n    this.y -= p.y;\n    return this;\n  },\n\n  _mult: function (k) {\n    this.x *= k;\n    this.y *= k;\n    return this;\n  },\n\n  _div: function (k) {\n    this.x /= k;\n    this.y /= k;\n    return this;\n  },\n\n  _multByPoint: function (p) {\n    this.x *= p.x;\n    this.y *= p.y;\n    return this;\n  },\n\n  _divByPoint: function (p) {\n    this.x /= p.x;\n    this.y /= p.y;\n    return this;\n  },\n\n  _unit: function () {\n    this._div(this.mag());\n    return this;\n  },\n\n  _perp: function () {\n    const y = this.y;\n    this.y = this.x;\n    this.x = -y;\n    return this;\n  },\n\n  _rotate: function (angle) {\n    const cos = Math.cos(angle),\n      sin = Math.sin(angle),\n      x = cos * this.x - sin * this.y,\n      y = sin * this.x + cos * this.y;\n    this.x = x;\n    this.y = y;\n    return this;\n  },\n\n  _rotateAround: function (angle, p) {\n    const cos = Math.cos(angle),\n      sin = Math.sin(angle),\n      x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n      y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n    this.x = x;\n    this.y = y;\n    return this;\n  },\n\n  _round: function () {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    return this;\n  },\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<number> | Point} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n  if (a instanceof Point) {\n    return a;\n  }\n  if (Array.isArray(a)) {\n    return new Point(a[0], a[1]);\n  }\n  return a;\n};\n\nexport { Point };\n","/**\n * Maplibre export first, then extensions can overload the exports.\n */\nexport * from \"maplibre-gl\";\n\n/**\n * To perform explicit named export so that they are included in the UMD bundle\n */\nimport * as ML from \"maplibre-gl\";\n\nconst supported = ML.default.supported;\nconst setRTLTextPlugin = ML.default.setRTLTextPlugin;\nconst getRTLTextPluginStatus = ML.default.getRTLTextPluginStatus;\n// const Map = ML.default.Map; // replaced by MapTiler's Map class\nconst NavigationControl = ML.default.NavigationControl;\nconst GeolocateControl = ML.default.GeolocateControl;\nconst AttributionControl = ML.default.AttributionControl;\nconst LogoControl = ML.default.LogoControl;\nconst ScaleControl = ML.default.ScaleControl;\nconst FullscreenControl = ML.default.FullscreenControl;\nconst TerrainControl = ML.default.TerrainControl;\nconst Popup = ML.default.Popup;\nconst Marker = ML.default.Marker;\nconst Style = ML.default.Style;\nconst LngLat = ML.default.LngLat;\nconst LngLatBounds = ML.default.LngLatBounds;\n// const Point = ML.default.Point; // replaced by actual ES module in ./Point.ts\nconst MercatorCoordinate = ML.default.MercatorCoordinate;\nconst Evented = ML.default.Evented;\nconst AJAXError = ML.default.AJAXError;\n// const config = ML.default.config; // replaced by MapTiler's config\nconst CanvasSource = ML.default.CanvasSource;\nconst GeoJSONSource = ML.default.GeoJSONSource;\nconst ImageSource = ML.default.ImageSource;\nconst RasterDEMTileSource = ML.default.RasterDEMTileSource;\nconst RasterTileSource = ML.default.RasterTileSource;\nconst VectorTileSource = ML.default.VectorTileSource;\nconst VideoSource = ML.default.VideoSource;\nconst prewarm = ML.default.prewarm;\nconst clearPrewarmedResources = ML.default.clearPrewarmedResources;\nconst version = ML.default.version;\nconst workerCount = ML.default.workerCount;\nconst maxParallelImageRequests = ML.default.maxParallelImageRequests;\nconst clearStorage = ML.default.clearStorage;\nconst workerUrl = ML.default.workerUrl;\nconst addProtocol = ML.default.addProtocol;\nconst removeProtocol = ML.default.removeProtocol;\n// const isSafari = ML.default.isSafari;\n// const getPerformanceMetrics = ML.default.getPerformanceMetrics;\n\nexport {\n  supported,\n  setRTLTextPlugin,\n  getRTLTextPluginStatus,\n  // Map,\n  NavigationControl,\n  GeolocateControl,\n  AttributionControl,\n  LogoControl,\n  ScaleControl,\n  FullscreenControl,\n  TerrainControl,\n  Popup,\n  Marker,\n  Style,\n  LngLat,\n  LngLatBounds,\n  // Point,\n  MercatorCoordinate,\n  Evented,\n  AJAXError,\n  // config,\n  CanvasSource,\n  GeoJSONSource,\n  ImageSource,\n  RasterDEMTileSource,\n  RasterTileSource,\n  VectorTileSource,\n  VideoSource,\n  prewarm,\n  clearPrewarmedResources,\n  version,\n  workerCount,\n  maxParallelImageRequests,\n  clearStorage,\n  workerUrl,\n  addProtocol,\n  removeProtocol,\n  // isSafari,\n  // getPerformanceMetrics\n};\n\nimport { Map } from \"./Map\";\nimport type { MapOptions } from \"./Map\";\n\n// importing client functions to expose them as part of the SDK\nimport type {\n  BBox,\n  ObjectBBox,\n  ArrayBBox,\n  // LngLat,\n  ArrayLngLat,\n  GeocodingOptions,\n  CoordinatesSearchOptions,\n  CenteredStaticMapOptions,\n  AutomaticStaticMapOptions,\n  BoundedStaticMapOptions,\n} from \"@maptiler/client\";\n\nimport {\n  geocoding,\n  geolocation,\n  coordinates,\n  data,\n  staticMaps,\n  ServiceError,\n  LanguageGeocoding,\n  LanguageGeocodingString,\n} from \"@maptiler/client\";\n\nimport { Point } from \"./Point\";\n\n// Importing enums and configs\nimport { config, SdkConfig } from \"./config\";\nimport { Language, LanguageString } from \"./language\";\nimport type { Unit } from \"./unit\";\nimport {\n  MapStyle,\n  ReferenceMapStyle,\n  MapStyleVariant,\n} from \"./mapstyle/mapstyle\";\n\nimport type { MapStyleType } from \"./mapstyle/mapstylepresetlist\";\n\n// Exporting types\nexport type {\n  // LngLat,\n  ArrayLngLat,\n  MapOptions,\n  GeocodingOptions,\n  BBox,\n  ObjectBBox,\n  ArrayBBox,\n  CoordinatesSearchOptions,\n  CenteredStaticMapOptions,\n  BoundedStaticMapOptions,\n  AutomaticStaticMapOptions,\n  LanguageString,\n  LanguageGeocodingString,\n  Unit,\n  MapStyleType,\n};\n\n// Exporting classes, objects, functions, etc.\nexport {\n  Map,\n  SdkConfig,\n  config,\n  ServiceError,\n  geocoding,\n  geolocation,\n  coordinates,\n  data,\n  staticMaps,\n  MapStyle,\n  Language,\n  LanguageGeocoding,\n  Point,\n  ReferenceMapStyle,\n  MapStyleVariant,\n};\n"],"names":["clientConfig","maplibre","Point","bezier","TerrainControl","uuidv4","ScaleControl","GeolocateControl","FullscreenControl"],"mappings":"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"}